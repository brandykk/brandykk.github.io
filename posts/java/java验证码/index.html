<!DOCTYPE html>
<html><head>
<title>Java验证码</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">



<meta property="og:title" content="Java验证码" />
<meta property="og:description" content="Utility.java import org.apache.commons.lang3.StringUtils; import org.apache.commons.logging.Log; import org.apache.commons.logging.LogFactory; import java.math.BigDecimal; import java.text.SimpleDateFormat; import java.util.*; public class Utility { protected final static Log logger = LogFactory.getLog(Utility.class); public static &lt;T&gt; List&lt;T&gt; newArray(int size, Class&lt;T&gt; clazz) { List&lt;T&gt; l = new ArrayList&lt;T&gt;(); for (int i = 0; i &lt; size; i&#43;&#43;) { T newInstance; try { newInstance = clazz.newInstance(); } catch (Exception e) { newInstance = null; } l.add(newInstance); } return l; } public static String randomString(int len, int type) { StringBuffer str = new StringBuffer(); // 默认去掉了容易混淆的字符oOLlI，要添加请使用addChars参数 String codestr = &#34;ABCDEFGHJKMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz&#34;; String codeNum = &#34;0123456789&#34;; //	switch (type) { //	case 0: //	codestr = &#34;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz&#34;; //	break; //	case 1: //	codestr = &#34;0123456789&#34;; //	break; //	case 2: //	codestr = &#34;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#34;; //	break; //	case 3: //	codestr = &#34;abcdefghijklmnopqrstuvwxyz&#34;; //	break; //	default: //	// 默认去掉了容易混淆的字符oOLl和数字01，要添加请使用addChars参数 //	codestr = &#34;ABCDEFGHIJKMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789&#34;; //	break; //	} char[] codes = codestr." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://brandykk.github.io/posts/java/java%E9%AA%8C%E8%AF%81%E7%A0%81/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-06-20T13:58:34+08:00" />
<meta property="article:modified_time" content="2021-06-20T13:58:34+08:00" /><meta property="og:site_name" content="白小生" />






<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Java验证码"/>
<meta name="twitter:description" content="Utility.java import org.apache.commons.lang3.StringUtils; import org.apache.commons.logging.Log; import org.apache.commons.logging.LogFactory; import java.math.BigDecimal; import java.text.SimpleDateFormat; import java.util.*; public class Utility { protected final static Log logger = LogFactory.getLog(Utility.class); public static &lt;T&gt; List&lt;T&gt; newArray(int size, Class&lt;T&gt; clazz) { List&lt;T&gt; l = new ArrayList&lt;T&gt;(); for (int i = 0; i &lt; size; i&#43;&#43;) { T newInstance; try { newInstance = clazz.newInstance(); } catch (Exception e) { newInstance = null; } l.add(newInstance); } return l; } public static String randomString(int len, int type) { StringBuffer str = new StringBuffer(); // 默认去掉了容易混淆的字符oOLlI，要添加请使用addChars参数 String codestr = &#34;ABCDEFGHJKMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz&#34;; String codeNum = &#34;0123456789&#34;; //	switch (type) { //	case 0: //	codestr = &#34;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz&#34;; //	break; //	case 1: //	codestr = &#34;0123456789&#34;; //	break; //	case 2: //	codestr = &#34;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#34;; //	break; //	case 3: //	codestr = &#34;abcdefghijklmnopqrstuvwxyz&#34;; //	break; //	default: //	// 默认去掉了容易混淆的字符oOLl和数字01，要添加请使用addChars参数 //	codestr = &#34;ABCDEFGHIJKMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789&#34;; //	break; //	} char[] codes = codestr."/>











  






      <script src="/js/toc.js"></script>
    
    <link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">

<link rel="stylesheet" href="/scss/dark-mode.min.cb53f1bee2b8900cb4f082afbf00175d6618f281cf9a2fe8619e3b52d20b5721.css" integrity="sha256-y1PxvuK4kAy08IKvvwAXXWYY8oHPmi/oYZ47UtILVyE=" media="screen">


<link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Material+Icons">



















</head>
<body>
    	<div id="app"><div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/posts">
                    Archive
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    Categories
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    Tags
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- 目录 -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#utilityjava" class="nav-utilityjava">
									Utility.java
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#imageutiljava" class="nav-imageutiljava">
									ImageUtil.java
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%aa%8c%e8%af%81%e7%a0%81%e8%b0%83%e7%94%a8%e6%96%b9%e6%b3%95%e5%b9%b6%e8%bf%94%e5%9b%9e" class="nav-验证码调用方法并返回">
									验证码调用方法并返回
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a id="navTitle" class="navbar-brand" href="https://brandykk.github.io">
            Brandy
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            <i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://brandykk.github.io">
        <div class="single-column-header-title">Brandy</div>
        
        <div class="single-column-header-subtitle">个人使用</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            

            <div class="post-head-wrapper-text-only"
                
            >
                <div class="post-title">
                    Java验证码
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2021-06-20 13:58
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/%E5%BC%80%E5%8F%91">开发</a>
                                &nbsp;
                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/java">java</a>
                                &nbsp;
                            
                        
                        
                            <i class="material-icons" style="">schedule</i>
                            

                            
                            

                            
                            9 min
                            
                            58 s.
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <h2 id="utilityjava">Utility.java</h2>
<!-- raw HTML omitted -->
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#008b45;text-decoration:underline">org.apache.commons.lang3.StringUtils</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#008b45;text-decoration:underline">org.apache.commons.logging.Log</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#008b45;text-decoration:underline">org.apache.commons.logging.LogFactory</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#008b45;text-decoration:underline">java.math.BigDecimal</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#008b45;text-decoration:underline">java.text.SimpleDateFormat</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#008b45;text-decoration:underline">java.util.*</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">Utility</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#8b008b;font-weight:bold">protected</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">final</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span>Log<span style="color:#bbb"> </span>logger<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>LogFactory.<span style="color:#658b00">getLog</span>(Utility.<span style="color:#658b00">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span>&lt;T&gt;<span style="color:#bbb"> </span>List&lt;T&gt;<span style="color:#bbb"> </span><span style="color:#008b45">newArray</span>(<span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>size,<span style="color:#bbb"> </span>Class&lt;T&gt;<span style="color:#bbb"> </span>clazz)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>List&lt;T&gt;<span style="color:#bbb"> </span>l<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>ArrayList&lt;T&gt;();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">for</span><span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>0;<span style="color:#bbb"> </span>i<span style="color:#bbb"> </span>&lt;<span style="color:#bbb"> </span>size;<span style="color:#bbb"> </span>i++)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>T<span style="color:#bbb"> </span>newInstance;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#8b008b;font-weight:bold">try</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">				</span>newInstance<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>clazz.<span style="color:#658b00">newInstance</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>}<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">catch</span><span style="color:#bbb"> </span>(Exception<span style="color:#bbb"> </span>e)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">				</span>newInstance<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">null</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>l.<span style="color:#658b00">add</span>(newInstance);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>l;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span>String<span style="color:#bbb"> </span><span style="color:#008b45">randomString</span>(<span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>len,<span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>type)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>StringBuffer<span style="color:#bbb"> </span>str<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>StringBuffer();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#228b22">// 默认去掉了容易混淆的字符oOLlI，要添加请使用addChars参数</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>String<span style="color:#bbb"> </span>codestr<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#cd5555">&#34;ABCDEFGHJKMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz&#34;</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>String<span style="color:#bbb"> </span>codeNum<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#cd5555">&#34;0123456789&#34;</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//		switch (type) {</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//		case 0:</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//			codestr = &#34;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz&#34;;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//			break;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//		case 1:</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//			codestr = &#34;0123456789&#34;;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//			break;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//		case 2:</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//			codestr = &#34;ABCDEFGHIJKLMNOPQRSTUVWXYZ&#34;;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//			break;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//		case 3:</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//			codestr = &#34;abcdefghijklmnopqrstuvwxyz&#34;;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//			break;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//		default:</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//			// 默认去掉了容易混淆的字符oOLl和数字01，要添加请使用addChars参数</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//			codestr = &#34;ABCDEFGHIJKMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789&#34;;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//			break;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//		}</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#00688b;font-weight:bold">char</span>[]<span style="color:#bbb"> </span>codes<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>codestr.<span style="color:#658b00">toCharArray</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#00688b;font-weight:bold">char</span>[]<span style="color:#bbb"> </span>codeNums<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>codeNum.<span style="color:#658b00">toCharArray</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">for</span><span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>0;<span style="color:#bbb"> </span>i<span style="color:#bbb"> </span>&lt;<span style="color:#bbb"> </span>len/2;<span style="color:#bbb"> </span>i++)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>r<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">int</span>)<span style="color:#bbb"> </span>(Math.<span style="color:#658b00">random</span>()<span style="color:#bbb"> </span>*<span style="color:#bbb"> </span>codestr.<span style="color:#658b00">length</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>str.<span style="color:#658b00">append</span>(codes[r]);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>n<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">int</span>)<span style="color:#bbb"> </span>(Math.<span style="color:#658b00">random</span>()*codeNum.<span style="color:#658b00">length</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>str.<span style="color:#658b00">append</span>(n);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>List&lt;String&gt;<span style="color:#bbb"> </span>list=Arrays.<span style="color:#658b00">asList</span>(str.<span style="color:#658b00">toString</span>().<span style="color:#658b00">split</span>(<span style="color:#cd5555">&#34;&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>Collections.<span style="color:#658b00">shuffle</span>(list);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>StringBuffer<span style="color:#bbb"> </span>str1<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>StringBuffer();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">for</span>(String<span style="color:#bbb"> </span>s:list){<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>str1.<span style="color:#658b00">append</span>(s);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>str1.<span style="color:#658b00">toString</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span>String<span style="color:#bbb"> </span><span style="color:#008b45">randomString</span>(<span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>length)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>randomString(length,<span style="color:#bbb"> </span>-1);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span><span style="color:#008b45">random</span>(<span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>number)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">int</span>)<span style="color:#bbb"> </span>(Math.<span style="color:#658b00">random</span>()<span style="color:#bbb"> </span>*<span style="color:#bbb"> </span>number);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span>Random<span style="color:#bbb"> </span>random<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>Random();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span><span style="color:#008b45">random</span>(<span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>total,<span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>count)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(count<span style="color:#bbb"> </span>==<span style="color:#bbb"> </span>1)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>total;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(count<span style="color:#bbb"> </span>==<span style="color:#bbb"> </span>0)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>0;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>average<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>total<span style="color:#bbb"> </span>/<span style="color:#bbb"> </span>count;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#00688b;font-weight:bold">double</span><span style="color:#bbb"> </span>d<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>random.<span style="color:#658b00">nextGaussian</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(d<span style="color:#bbb"> </span>&lt;<span style="color:#bbb"> </span>-0.<span style="color:#658b00">75</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>d<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>-0.<span style="color:#658b00">75</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(d<span style="color:#bbb"> </span>&lt;<span style="color:#bbb"> </span>-1<span style="color:#bbb"> </span>+<span style="color:#bbb"> </span>1.<span style="color:#658b00">0</span><span style="color:#bbb"> </span>/<span style="color:#bbb"> </span>count)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>d<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>-1<span style="color:#bbb"> </span>+<span style="color:#bbb"> </span>1.<span style="color:#658b00">0</span><span style="color:#bbb"> </span>/<span style="color:#bbb"> </span>count;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(d<span style="color:#bbb"> </span>&gt;<span style="color:#bbb"> </span>4)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>d<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>4;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(d<span style="color:#bbb"> </span>&gt;<span style="color:#bbb"> </span>count<span style="color:#bbb"> </span>-<span style="color:#bbb"> </span>0.<span style="color:#658b00">1</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>d<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>count<span style="color:#bbb"> </span>-<span style="color:#bbb"> </span>0.<span style="color:#658b00">1</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">int</span>)<span style="color:#bbb"> </span>(d<span style="color:#bbb"> </span>*<span style="color:#bbb"> </span>average<span style="color:#bbb"> </span>+<span style="color:#bbb"> </span>average);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span>String<span style="color:#bbb"> </span><span style="color:#008b45">toString</span>(Object<span style="color:#bbb"> </span>o)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(o<span style="color:#bbb"> </span>==<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">null</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">null</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>Class<span style="color:#bbb"> </span>c<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>o.<span style="color:#658b00">getClass</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(c<span style="color:#bbb"> </span>==<span style="color:#bbb"> </span>Integer.<span style="color:#658b00">class</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>Integer.<span style="color:#658b00">toString</span>((Integer)<span style="color:#bbb"> </span>o);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(c<span style="color:#bbb"> </span>==<span style="color:#bbb"> </span>Float.<span style="color:#658b00">class</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>Float.<span style="color:#658b00">toString</span>((Float)<span style="color:#bbb"> </span>o);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(c<span style="color:#bbb"> </span>==<span style="color:#bbb"> </span>Long.<span style="color:#658b00">class</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>Long.<span style="color:#658b00">toString</span>((Long)<span style="color:#bbb"> </span>o);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(c<span style="color:#bbb"> </span>==<span style="color:#bbb"> </span>Double.<span style="color:#658b00">class</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>Double.<span style="color:#658b00">toString</span>((Double)<span style="color:#bbb"> </span>o);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(c<span style="color:#bbb"> </span>==<span style="color:#bbb"> </span>BigDecimal.<span style="color:#658b00">class</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>o.<span style="color:#658b00">toString</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(c<span style="color:#bbb"> </span>==<span style="color:#bbb"> </span>Boolean.<span style="color:#658b00">class</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>Boolean.<span style="color:#658b00">toString</span>((Boolean)<span style="color:#bbb"> </span>o);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(c<span style="color:#bbb"> </span>==<span style="color:#bbb"> </span>Date.<span style="color:#658b00">class</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>SimpleDateFormat<span style="color:#bbb"> </span>sdf<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>SimpleDateFormat(<span style="color:#cd5555">&#34;yyyy-MM-dd HH:mm:ss&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>String<span style="color:#bbb"> </span>ss<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>sdf.<span style="color:#658b00">format</span>(o);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>ss;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">else</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>o.<span style="color:#658b00">toString</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#707a7c">@SuppressWarnings</span>(<span style="color:#cd5555">&#34;unchecked&#34;</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span>&lt;T&gt;<span style="color:#bbb"> </span>T<span style="color:#bbb"> </span><span style="color:#008b45">toObject</span>(String<span style="color:#bbb"> </span>str,<span style="color:#bbb"> </span>Class&lt;T&gt;<span style="color:#bbb"> </span>c)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(str<span style="color:#bbb"> </span>==<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">null</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">null</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">try</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>str<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>str.<span style="color:#658b00">trim</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(c<span style="color:#bbb"> </span>==<span style="color:#bbb"> </span>String.<span style="color:#658b00">class</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">				</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>(T)<span style="color:#bbb"> </span>str;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>}<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(StringUtils.<span style="color:#658b00">isBlank</span>(str))<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">				</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">null</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>}<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(c<span style="color:#bbb"> </span>==<span style="color:#bbb"> </span>Integer.<span style="color:#658b00">class</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">				</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>(T)<span style="color:#bbb"> </span>(Integer)<span style="color:#bbb"> </span>Integer.<span style="color:#658b00">parseInt</span>(str);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>}<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(c<span style="color:#bbb"> </span>==<span style="color:#bbb"> </span>Long.<span style="color:#658b00">class</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">				</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>(T)<span style="color:#bbb"> </span>(Long)<span style="color:#bbb"> </span>Long.<span style="color:#658b00">parseLong</span>(str);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>}<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(c<span style="color:#bbb"> </span>==<span style="color:#bbb"> </span>Byte.<span style="color:#658b00">class</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">				</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>(T)<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>Byte((<span style="color:#00688b;font-weight:bold">byte</span>)<span style="color:#bbb"> </span>Integer.<span style="color:#658b00">parseInt</span>(str,<span style="color:#bbb"> </span>16));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>}<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(c<span style="color:#bbb"> </span>==<span style="color:#bbb"> </span>Float.<span style="color:#658b00">class</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">				</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>(T)<span style="color:#bbb"> </span>(Float)<span style="color:#bbb"> </span>Float.<span style="color:#658b00">parseFloat</span>(str);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>}<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(c<span style="color:#bbb"> </span>==<span style="color:#bbb"> </span>Double.<span style="color:#658b00">class</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">				</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>(T)<span style="color:#bbb"> </span>(Double)<span style="color:#bbb"> </span>Double.<span style="color:#658b00">parseDouble</span>(str);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>}<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(c<span style="color:#bbb"> </span>==<span style="color:#bbb"> </span>Boolean.<span style="color:#658b00">class</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">				</span><span style="color:#8b008b;font-weight:bold">if</span>(<span style="color:#cd5555">&#34;1&#34;</span>.<span style="color:#658b00">equals</span>(str))<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">					</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>(T)Boolean.<span style="color:#658b00">TRUE</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">				</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>(T)<span style="color:#bbb"> </span>(Boolean)<span style="color:#bbb"> </span>Boolean.<span style="color:#658b00">parseBoolean</span>(str);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>}<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(c<span style="color:#bbb"> </span>==<span style="color:#bbb"> </span>BigDecimal.<span style="color:#658b00">class</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">				</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>(T)<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>BigDecimal(str);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>}<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(c<span style="color:#bbb"> </span>==<span style="color:#bbb"> </span>Date.<span style="color:#658b00">class</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">				</span>SimpleDateFormat<span style="color:#bbb"> </span>sdf<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>SimpleDateFormat(<span style="color:#cd5555">&#34;yyyy-MM-dd HH:mm:ss&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">				</span>Date<span style="color:#bbb"> </span>ss<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>sdf.<span style="color:#658b00">parse</span>(str);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">				</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>(T)<span style="color:#bbb"> </span>ss;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>}<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">else</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">				</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>(T)<span style="color:#bbb"> </span>str;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">catch</span><span style="color:#bbb"> </span>(Exception<span style="color:#bbb"> </span>e)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#228b22">// 打印异常信息，例当一个非常长的数字字符串转Integer时，若没有意识到Integer数字大小限制时，没有异常输出，难于找到原因。非常不利问题的解决</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>logger.<span style="color:#658b00">debug</span>(<span style="color:#cd5555">&#34;对象转换异常，调试用&#34;</span>,<span style="color:#bbb"> </span>e);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">null</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#228b22">// 列举排序</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span>&lt;T&gt;<span style="color:#bbb"> </span>List&lt;T&gt;<span style="color:#bbb"> </span><span style="color:#008b45">sort</span>(Enumeration&lt;T&gt;<span style="color:#bbb"> </span>enumer)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>List&lt;T&gt;<span style="color:#bbb"> </span>l<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>ArrayList&lt;T&gt;();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">while</span><span style="color:#bbb"> </span>(enumer.<span style="color:#658b00">hasMoreElements</span>())<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>T<span style="color:#bbb"> </span>t<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>(T)<span style="color:#bbb"> </span>enumer.<span style="color:#658b00">nextElement</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>l.<span style="color:#658b00">add</span>(t);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>Collections.<span style="color:#658b00">sort</span>((List)<span style="color:#bbb"> </span>l);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>l;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#228b22">// 列表排序</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span>&lt;T&gt;<span style="color:#bbb"> </span>List&lt;T&gt;<span style="color:#bbb"> </span><span style="color:#008b45">sort</span>(List&lt;T&gt;<span style="color:#bbb"> </span>l)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>Collections.<span style="color:#658b00">sort</span>((List)<span style="color:#bbb"> </span>l);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>l;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span>String<span style="color:#bbb"> </span><span style="color:#008b45">substring</span>(String<span style="color:#bbb"> </span>str,<span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>from,<span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>to)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(from<span style="color:#bbb"> </span>&gt;=<span style="color:#bbb"> </span>str.<span style="color:#658b00">length</span>())<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">null</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(from<span style="color:#bbb"> </span>&lt;<span style="color:#bbb"> </span>0)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>from<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>0;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(to<span style="color:#bbb"> </span>&lt;<span style="color:#bbb"> </span>0<span style="color:#bbb"> </span>||<span style="color:#bbb"> </span>to<span style="color:#bbb"> </span>&gt;<span style="color:#bbb"> </span>str.<span style="color:#658b00">length</span>())<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>str.<span style="color:#658b00">substring</span>(from);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">else</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>str.<span style="color:#658b00">substring</span>(from,<span style="color:#bbb"> </span>to);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//	public static void main(String[] args) {</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//		String in = randomString(4);</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//		System.out.println(in);</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//	}</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><!-- raw HTML omitted -->
<h2 id="imageutiljava">ImageUtil.java</h2>
<!-- raw HTML omitted -->
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#008b45;text-decoration:underline">lombok.extern.slf4j.Slf4j</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#008b45;text-decoration:underline">org.jeecg.common.util.IOCloseUtil</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#008b45;text-decoration:underline">javax.imageio.ImageIO</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#008b45;text-decoration:underline">java.awt.*</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#008b45;text-decoration:underline">java.awt.geom.AffineTransform</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#008b45;text-decoration:underline">java.awt.image.BufferedImage</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#008b45;text-decoration:underline">java.io.File</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#008b45;text-decoration:underline">java.io.FileOutputStream</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#008b45;text-decoration:underline">java.io.IOException</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#008b45;text-decoration:underline">java.io.OutputStream</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#008b45;text-decoration:underline">java.util.Arrays</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">import</span><span style="color:#bbb"> </span><span style="color:#008b45;text-decoration:underline">java.util.Random</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#707a7c">@Slf4j</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">ImageUtil</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#228b22">//使用到Algerian字体，系统里没有的话需要安装字体，字体只显示大写，去掉了1,0,i,o几个容易混淆的字符</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">final</span><span style="color:#bbb"> </span>String<span style="color:#bbb"> </span>VERIFY_CODES<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#cd5555">&#34;23456789ABCDEFGHJKLMNPQRSTUVWXYZ&#34;</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">private</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span>Random<span style="color:#bbb"> </span>random<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>Random();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * 使用系统默认字符源生成验证码
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     *
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @param verifySize 验证码长度
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     */</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span>String<span style="color:#bbb"> </span><span style="color:#008b45">generateVerifyCode</span>(<span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>verifySize)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>generateVerifyCode(verifySize,<span style="color:#bbb"> </span>VERIFY_CODES);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * 使用指定源生成验证码
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     *
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @param verifySize 验证码长度
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @param sources    验证码字符源
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     */</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span>String<span style="color:#bbb"> </span><span style="color:#008b45">generateVerifyCode</span>(<span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>verifySize,<span style="color:#bbb"> </span>String<span style="color:#bbb"> </span>sources)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(sources<span style="color:#bbb"> </span>==<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">null</span><span style="color:#bbb"> </span>||<span style="color:#bbb"> </span>sources.<span style="color:#658b00">length</span>()<span style="color:#bbb"> </span>==<span style="color:#bbb"> </span>0)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>sources<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>VERIFY_CODES;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>codesLen<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>sources.<span style="color:#658b00">length</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>Random<span style="color:#bbb"> </span>rand<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>Random(System.<span style="color:#658b00">currentTimeMillis</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>StringBuilder<span style="color:#bbb"> </span>verifyCode<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>StringBuilder(verifySize);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">for</span><span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>0;<span style="color:#bbb"> </span>i<span style="color:#bbb"> </span>&lt;<span style="color:#bbb"> </span>verifySize;<span style="color:#bbb"> </span>i++)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>verifyCode.<span style="color:#658b00">append</span>(sources.<span style="color:#658b00">charAt</span>(rand.<span style="color:#658b00">nextInt</span>(codesLen<span style="color:#bbb"> </span>-<span style="color:#bbb"> </span>1)));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>verifyCode.<span style="color:#658b00">toString</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * 生成随机验证码文件,并返回验证码值
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     *
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @param w
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @param h
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @param outputFile
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @param verifySize
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @throws IOException
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     */</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//    public static String outputVerifyImage(int w, int h, File outputFile, int verifySize) throws IOException {</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//        String verifyCode = generateVerifyCode(verifySize);</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//        outputImage(w, h, outputFile, verifyCode);</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//        return verifyCode;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//    }</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * 输出随机验证码图片流,并返回验证码值
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     *
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @param w
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @param h
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @param os
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @param verifySize
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @throws IOException
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     */</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//    public static String outputVerifyImage(int w, int h, OutputStream os, int verifySize) throws IOException {</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//        String verifyCode = generateVerifyCode(verifySize);</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//        outputImage(w, h, os, verifyCode);</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//        return verifyCode;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//    }</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * 生成指定验证码图像文件
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     *
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @param w
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @param h
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @param outputFile
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @param code
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @throws IOException
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     */</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#008b45">outputImage</span>(<span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>w,<span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>h,<span style="color:#bbb"> </span>File<span style="color:#bbb"> </span>outputFile,<span style="color:#bbb"> </span>String<span style="color:#bbb"> </span>code)<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">throws</span><span style="color:#bbb"> </span>IOException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(outputFile<span style="color:#bbb"> </span>==<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">null</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#8b008b;font-weight:bold">return</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>File<span style="color:#bbb"> </span>dir<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>outputFile.<span style="color:#658b00">getParentFile</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(!dir.<span style="color:#658b00">exists</span>())<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>dir.<span style="color:#658b00">mkdirs</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">try</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>outputFile.<span style="color:#658b00">createNewFile</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>FileOutputStream<span style="color:#bbb"> </span>fos<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>FileOutputStream(outputFile);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>outputImage(w,<span style="color:#bbb"> </span>h,<span style="color:#bbb"> </span>fos,<span style="color:#bbb"> </span>code);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>IOCloseUtil.<span style="color:#658b00">close</span>(fos);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">catch</span><span style="color:#bbb"> </span>(IOException<span style="color:#bbb"> </span>e)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#8b008b;font-weight:bold">throw</span><span style="color:#bbb"> </span>e;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#228b22">/**
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * 输出指定验证码图片流
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     *
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @param w
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @param h
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @param os
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @param code
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     * @throws IOException
</span></span></span><span style="display:flex;"><span><span style="color:#228b22">     */</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#008b45">outputImage</span>(<span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>w,<span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>h,<span style="color:#bbb"> </span>OutputStream<span style="color:#bbb"> </span>os,<span style="color:#bbb"> </span>String<span style="color:#bbb"> </span>code)<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">throws</span><span style="color:#bbb"> </span>IOException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>verifySize<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>code.<span style="color:#658b00">length</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>BufferedImage<span style="color:#bbb"> </span>image<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>BufferedImage(w,<span style="color:#bbb"> </span>h,<span style="color:#bbb"> </span>BufferedImage.<span style="color:#658b00">TYPE_INT_RGB</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>Random<span style="color:#bbb"> </span>rand<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>Random();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>Graphics2D<span style="color:#bbb"> </span>g2<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>image.<span style="color:#658b00">createGraphics</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>g2.<span style="color:#658b00">setRenderingHint</span>(RenderingHints.<span style="color:#658b00">KEY_ANTIALIASING</span>,<span style="color:#bbb"> </span>RenderingHints.<span style="color:#658b00">VALUE_ANTIALIAS_ON</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>Color[]<span style="color:#bbb"> </span>colors<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>Color[5];<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>Color[]<span style="color:#bbb"> </span>colorSpaces<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>Color[]{Color.<span style="color:#658b00">WHITE</span>,<span style="color:#bbb"> </span>Color.<span style="color:#658b00">CYAN</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>Color.<span style="color:#658b00">GRAY</span>,<span style="color:#bbb"> </span>Color.<span style="color:#658b00">LIGHT_GRAY</span>,<span style="color:#bbb"> </span>Color.<span style="color:#658b00">MAGENTA</span>,<span style="color:#bbb"> </span>Color.<span style="color:#658b00">ORANGE</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>Color.<span style="color:#658b00">PINK</span>,<span style="color:#bbb"> </span>Color.<span style="color:#658b00">YELLOW</span>};<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#00688b;font-weight:bold">float</span>[]<span style="color:#bbb"> </span>fractions<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">float</span>[colors.<span style="color:#658b00">length</span>];<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">for</span><span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>0;<span style="color:#bbb"> </span>i<span style="color:#bbb"> </span>&lt;<span style="color:#bbb"> </span>colors.<span style="color:#658b00">length</span>;<span style="color:#bbb"> </span>i++)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>colors[i]<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>colorSpaces[rand.<span style="color:#658b00">nextInt</span>(colorSpaces.<span style="color:#658b00">length</span>)];<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>fractions[i]<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>rand.<span style="color:#658b00">nextFloat</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>Arrays.<span style="color:#658b00">sort</span>(fractions);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>g2.<span style="color:#658b00">setColor</span>(Color.<span style="color:#658b00">GRAY</span>);<span style="color:#228b22">// 设置边框色</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>g2.<span style="color:#658b00">fillRect</span>(0,<span style="color:#bbb"> </span>0,<span style="color:#bbb"> </span>w,<span style="color:#bbb"> </span>h);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>Color<span style="color:#bbb"> </span>c<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>getRandColor(200,<span style="color:#bbb"> </span>250);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>g2.<span style="color:#658b00">setColor</span>(c);<span style="color:#228b22">// 设置背景色</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>g2.<span style="color:#658b00">fillRect</span>(0,<span style="color:#bbb"> </span>2,<span style="color:#bbb"> </span>w,<span style="color:#bbb"> </span>h<span style="color:#bbb"> </span>-<span style="color:#bbb"> </span>4);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#228b22">//绘制干扰线</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>Random<span style="color:#bbb"> </span>random<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>Random();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>g2.<span style="color:#658b00">setColor</span>(getRandColor(160,<span style="color:#bbb"> </span>200));<span style="color:#228b22">// 设置线条的颜色</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">for</span><span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>0;<span style="color:#bbb"> </span>i<span style="color:#bbb"> </span>&lt;<span style="color:#bbb"> </span>20;<span style="color:#bbb"> </span>i++)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>x<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>random.<span style="color:#658b00">nextInt</span>(w<span style="color:#bbb"> </span>-<span style="color:#bbb"> </span>1);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>y<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>random.<span style="color:#658b00">nextInt</span>(h<span style="color:#bbb"> </span>-<span style="color:#bbb"> </span>1);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>xl<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>random.<span style="color:#658b00">nextInt</span>(6)<span style="color:#bbb"> </span>+<span style="color:#bbb"> </span>1;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>yl<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>random.<span style="color:#658b00">nextInt</span>(12)<span style="color:#bbb"> </span>+<span style="color:#bbb"> </span>1;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>g2.<span style="color:#658b00">drawLine</span>(x,<span style="color:#bbb"> </span>y,<span style="color:#bbb"> </span>x<span style="color:#bbb"> </span>+<span style="color:#bbb"> </span>xl<span style="color:#bbb"> </span>+<span style="color:#bbb"> </span>40,<span style="color:#bbb"> </span>y<span style="color:#bbb"> </span>+<span style="color:#bbb"> </span>yl<span style="color:#bbb"> </span>+<span style="color:#bbb"> </span>20);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#228b22">// 添加噪点</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#00688b;font-weight:bold">float</span><span style="color:#bbb"> </span>yawpRate<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>0.<span style="color:#658b00">05f</span>;<span style="color:#228b22">// 噪声率</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>area<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">int</span>)<span style="color:#bbb"> </span>(yawpRate<span style="color:#bbb"> </span>*<span style="color:#bbb"> </span>w<span style="color:#bbb"> </span>*<span style="color:#bbb"> </span>h);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">for</span><span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>0;<span style="color:#bbb"> </span>i<span style="color:#bbb"> </span>&lt;<span style="color:#bbb"> </span>area;<span style="color:#bbb"> </span>i++)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>x<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>random.<span style="color:#658b00">nextInt</span>(w);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>y<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>random.<span style="color:#658b00">nextInt</span>(h);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>rgb<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>getRandomIntColor();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>image.<span style="color:#658b00">setRGB</span>(x,<span style="color:#bbb"> </span>y,<span style="color:#bbb"> </span>rgb);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>shear(g2,<span style="color:#bbb"> </span>w,<span style="color:#bbb"> </span>h,<span style="color:#bbb"> </span>c);<span style="color:#228b22">// 使图片扭曲</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>g2.<span style="color:#658b00">setColor</span>(getRandColor(100,<span style="color:#bbb"> </span>160));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>fontSize<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>h<span style="color:#bbb"> </span>-<span style="color:#bbb"> </span>4;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>Font<span style="color:#bbb"> </span>font<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>Font(<span style="color:#cd5555">&#34;Algerian&#34;</span>,<span style="color:#bbb"> </span>Font.<span style="color:#658b00">ITALIC</span>,<span style="color:#bbb"> </span>fontSize);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>g2.<span style="color:#658b00">setFont</span>(font);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#00688b;font-weight:bold">char</span>[]<span style="color:#bbb"> </span>chars<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>code.<span style="color:#658b00">toCharArray</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">for</span><span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>0;<span style="color:#bbb"> </span>i<span style="color:#bbb"> </span>&lt;<span style="color:#bbb"> </span>verifySize;<span style="color:#bbb"> </span>i++)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>AffineTransform<span style="color:#bbb"> </span>affine<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>AffineTransform();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>affine.<span style="color:#658b00">setToRotation</span>(Math.<span style="color:#658b00">PI</span><span style="color:#bbb"> </span>/<span style="color:#bbb"> </span>4<span style="color:#bbb"> </span>*<span style="color:#bbb"> </span>rand.<span style="color:#658b00">nextDouble</span>()<span style="color:#bbb"> </span>*<span style="color:#bbb"> </span>(rand.<span style="color:#658b00">nextBoolean</span>()<span style="color:#bbb"> </span>?<span style="color:#bbb"> </span>1<span style="color:#bbb"> </span>:<span style="color:#bbb"> </span>-1),<span style="color:#bbb"> </span>(w<span style="color:#bbb"> </span>/<span style="color:#bbb"> </span>verifySize)<span style="color:#bbb"> </span>*<span style="color:#bbb"> </span>i<span style="color:#bbb"> </span>+<span style="color:#bbb"> </span>fontSize<span style="color:#bbb"> </span>/<span style="color:#bbb"> </span>2,<span style="color:#bbb"> </span>h<span style="color:#bbb"> </span>/<span style="color:#bbb"> </span>2);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>g2.<span style="color:#658b00">setTransform</span>(affine);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>g2.<span style="color:#658b00">drawChars</span>(chars,<span style="color:#bbb"> </span>i,<span style="color:#bbb"> </span>1,<span style="color:#bbb"> </span>((w<span style="color:#bbb"> </span>-<span style="color:#bbb"> </span>10)<span style="color:#bbb"> </span>/<span style="color:#bbb"> </span>verifySize)<span style="color:#bbb"> </span>*<span style="color:#bbb"> </span>i<span style="color:#bbb"> </span>+<span style="color:#bbb"> </span>5,<span style="color:#bbb"> </span>h<span style="color:#bbb"> </span>/<span style="color:#bbb"> </span>2<span style="color:#bbb"> </span>+<span style="color:#bbb"> </span>fontSize<span style="color:#bbb"> </span>/<span style="color:#bbb"> </span>2<span style="color:#bbb"> </span>-<span style="color:#bbb"> </span>10);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>g2.<span style="color:#658b00">dispose</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>ImageIO.<span style="color:#658b00">write</span>(image,<span style="color:#bbb"> </span><span style="color:#cd5555">&#34;png&#34;</span>,<span style="color:#bbb"> </span>os);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">private</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span>Color<span style="color:#bbb"> </span><span style="color:#008b45">getRandColor</span>(<span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>fc,<span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>bc)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(fc<span style="color:#bbb"> </span>&gt;<span style="color:#bbb"> </span>255)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>fc<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>255;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(bc<span style="color:#bbb"> </span>&gt;<span style="color:#bbb"> </span>255)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>bc<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>255;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>r<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>fc<span style="color:#bbb"> </span>+<span style="color:#bbb"> </span>random.<span style="color:#658b00">nextInt</span>(bc<span style="color:#bbb"> </span>-<span style="color:#bbb"> </span>fc);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>g<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>fc<span style="color:#bbb"> </span>+<span style="color:#bbb"> </span>random.<span style="color:#658b00">nextInt</span>(bc<span style="color:#bbb"> </span>-<span style="color:#bbb"> </span>fc);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>b<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>fc<span style="color:#bbb"> </span>+<span style="color:#bbb"> </span>random.<span style="color:#658b00">nextInt</span>(bc<span style="color:#bbb"> </span>-<span style="color:#bbb"> </span>fc);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>Color(r,<span style="color:#bbb"> </span>g,<span style="color:#bbb"> </span>b);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">private</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span><span style="color:#008b45">getRandomIntColor</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#00688b;font-weight:bold">int</span>[]<span style="color:#bbb"> </span>rgb<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>getRandomRgb();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>color<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>0;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">for</span><span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>c<span style="color:#bbb"> </span>:<span style="color:#bbb"> </span>rgb)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>color<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>color<span style="color:#bbb"> </span>&lt;&lt;<span style="color:#bbb"> </span>8;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>color<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>color<span style="color:#bbb"> </span>|<span style="color:#bbb"> </span>c;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>color;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">private</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">int</span>[]<span style="color:#bbb"> </span><span style="color:#008b45">getRandomRgb</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#00688b;font-weight:bold">int</span>[]<span style="color:#bbb"> </span>rgb<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">int</span>[3];<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">for</span><span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>0;<span style="color:#bbb"> </span>i<span style="color:#bbb"> </span>&lt;<span style="color:#bbb"> </span>3;<span style="color:#bbb"> </span>i++)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>rgb[i]<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>random.<span style="color:#658b00">nextInt</span>(255);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>rgb;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">private</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#008b45">shear</span>(Graphics<span style="color:#bbb"> </span>g,<span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>w1,<span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>h1,<span style="color:#bbb"> </span>Color<span style="color:#bbb"> </span>color)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>shearX(g,<span style="color:#bbb"> </span>w1,<span style="color:#bbb"> </span>h1,<span style="color:#bbb"> </span>color);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>shearY(g,<span style="color:#bbb"> </span>w1,<span style="color:#bbb"> </span>h1,<span style="color:#bbb"> </span>color);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">private</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#008b45">shearX</span>(Graphics<span style="color:#bbb"> </span>g,<span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>w1,<span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>h1,<span style="color:#bbb"> </span>Color<span style="color:#bbb"> </span>color)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>period<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>random.<span style="color:#658b00">nextInt</span>(2);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#00688b;font-weight:bold">boolean</span><span style="color:#bbb"> </span>borderGap<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">true</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>frames<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>1;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>phase<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>random.<span style="color:#658b00">nextInt</span>(2);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">for</span><span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>0;<span style="color:#bbb"> </span>i<span style="color:#bbb"> </span>&lt;<span style="color:#bbb"> </span>h1;<span style="color:#bbb"> </span>i++)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#00688b;font-weight:bold">double</span><span style="color:#bbb"> </span>d<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">double</span>)<span style="color:#bbb"> </span>(period<span style="color:#bbb"> </span>&gt;&gt;<span style="color:#bbb"> </span>1)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>*<span style="color:#bbb"> </span>Math.<span style="color:#658b00">sin</span>((<span style="color:#00688b;font-weight:bold">double</span>)<span style="color:#bbb"> </span>i<span style="color:#bbb"> </span>/<span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">double</span>)<span style="color:#bbb"> </span>period<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>+<span style="color:#bbb"> </span>(6.<span style="color:#658b00">2831853071795862D</span><span style="color:#bbb"> </span>*<span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">double</span>)<span style="color:#bbb"> </span>phase)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>/<span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">double</span>)<span style="color:#bbb"> </span>frames);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>g.<span style="color:#658b00">copyArea</span>(0,<span style="color:#bbb"> </span>i,<span style="color:#bbb"> </span>w1,<span style="color:#bbb"> </span>1,<span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">int</span>)<span style="color:#bbb"> </span>d,<span style="color:#bbb"> </span>0);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(borderGap)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>g.<span style="color:#658b00">setColor</span>(color);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>g.<span style="color:#658b00">drawLine</span>((<span style="color:#00688b;font-weight:bold">int</span>)<span style="color:#bbb"> </span>d,<span style="color:#bbb"> </span>i,<span style="color:#bbb"> </span>0,<span style="color:#bbb"> </span>i);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>g.<span style="color:#658b00">drawLine</span>((<span style="color:#00688b;font-weight:bold">int</span>)<span style="color:#bbb"> </span>d<span style="color:#bbb"> </span>+<span style="color:#bbb"> </span>w1,<span style="color:#bbb"> </span>i,<span style="color:#bbb"> </span>w1,<span style="color:#bbb"> </span>i);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">private</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#008b45">shearY</span>(Graphics<span style="color:#bbb"> </span>g,<span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>w1,<span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>h1,<span style="color:#bbb"> </span>Color<span style="color:#bbb"> </span>color)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>period<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>random.<span style="color:#658b00">nextInt</span>(40)<span style="color:#bbb"> </span>+<span style="color:#bbb"> </span>10;<span style="color:#bbb"> </span><span style="color:#228b22">// 50;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#00688b;font-weight:bold">boolean</span><span style="color:#bbb"> </span>borderGap<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">true</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>frames<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>20;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>phase<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>7;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">for</span><span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">int</span><span style="color:#bbb"> </span>i<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>0;<span style="color:#bbb"> </span>i<span style="color:#bbb"> </span>&lt;<span style="color:#bbb"> </span>w1;<span style="color:#bbb"> </span>i++)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#00688b;font-weight:bold">double</span><span style="color:#bbb"> </span>d<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">double</span>)<span style="color:#bbb"> </span>(period<span style="color:#bbb"> </span>&gt;&gt;<span style="color:#bbb"> </span>1)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>*<span style="color:#bbb"> </span>Math.<span style="color:#658b00">sin</span>((<span style="color:#00688b;font-weight:bold">double</span>)<span style="color:#bbb"> </span>i<span style="color:#bbb"> </span>/<span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">double</span>)<span style="color:#bbb"> </span>period<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>+<span style="color:#bbb"> </span>(6.<span style="color:#658b00">2831853071795862D</span><span style="color:#bbb"> </span>*<span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">double</span>)<span style="color:#bbb"> </span>phase)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                    </span>/<span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">double</span>)<span style="color:#bbb"> </span>frames);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>g.<span style="color:#658b00">copyArea</span>(i,<span style="color:#bbb"> </span>0,<span style="color:#bbb"> </span>1,<span style="color:#bbb"> </span>h1,<span style="color:#bbb"> </span>0,<span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">int</span>)<span style="color:#bbb"> </span>d);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(borderGap)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>g.<span style="color:#658b00">setColor</span>(color);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>g.<span style="color:#658b00">drawLine</span>(i,<span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">int</span>)<span style="color:#bbb"> </span>d,<span style="color:#bbb"> </span>i,<span style="color:#bbb"> </span>0);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>g.<span style="color:#658b00">drawLine</span>(i,<span style="color:#bbb"> </span>(<span style="color:#00688b;font-weight:bold">int</span>)<span style="color:#bbb"> </span>d<span style="color:#bbb"> </span>+<span style="color:#bbb"> </span>h1,<span style="color:#bbb"> </span>i,<span style="color:#bbb"> </span>h1);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//    public static void main(String[] args) throws IOException {</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//        for (int i = 0; i &lt; 20; i++) {</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//            File dir = new File(&#34;E:/img/&#34;);</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//            int w = 200, h = 80;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//            String verifyCode = generateVerifyCode(4);</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//            File file = new File(dir, verifyCode + &#34;.jpg&#34;);</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//            outputImage(w, h, file, verifyCode);</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//        }</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//    }</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><!-- raw HTML omitted -->
<h2 id="验证码调用方法并返回">验证码调用方法并返回</h2>
<!-- raw HTML omitted -->
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span>Result&lt;String&gt;<span style="color:#bbb"> </span><span style="color:#008b45">verify</span>(HttpServletRequest<span style="color:#bbb"> </span>request,<span style="color:#bbb"> </span>HttpServletResponse<span style="color:#bbb"> </span>response)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>Result&lt;String&gt;<span style="color:#bbb"> </span>result<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>Result&lt;&gt;();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#228b22">// 获取界面传过来的验证码</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>String<span style="color:#bbb"> </span>securityCode<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>Utility.<span style="color:#658b00">randomString</span>(4);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>ByteArrayOutputStream<span style="color:#bbb"> </span>bos<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>ByteArrayOutputStream();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">try</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>ImageUtil.<span style="color:#658b00">outputImage</span>(107,<span style="color:#bbb"> </span>40,<span style="color:#bbb"> </span>bos,<span style="color:#bbb"> </span>securityCode);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>redisUtil.<span style="color:#658b00">set</span>(getVerifyKey(request),<span style="color:#bbb"> </span>securityCode.<span style="color:#658b00">toLowerCase</span>(Locale.<span style="color:#658b00">ENGLISH</span>),<span style="color:#bbb"> </span>1<span style="color:#bbb"> </span>*<span style="color:#bbb"> </span>60);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>String<span style="color:#bbb"> </span>verifys<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>String(Base64.<span style="color:#658b00">encodeBase64</span>(bos.<span style="color:#658b00">toByteArray</span>()));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>result.<span style="color:#658b00">setResult</span>(verifys);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">catch</span><span style="color:#bbb"> </span>(JeecgBootException<span style="color:#bbb"> </span>e)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>e.<span style="color:#658b00">printStackTrace</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>result.<span style="color:#658b00">error500</span>(<span style="color:#cd5555">&#34;生成验证码失败&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">catch</span><span style="color:#bbb"> </span>(Exception<span style="color:#bbb"> </span>e)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>e.<span style="color:#658b00">printStackTrace</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>result.<span style="color:#658b00">error500</span>(<span style="color:#cd5555">&#34;生成验证码失败&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">finally</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(bos<span style="color:#bbb"> </span>!=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">null</span>)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">				</span><span style="color:#8b008b;font-weight:bold">try</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">					</span>bos.<span style="color:#658b00">close</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">				</span>}<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">catch</span><span style="color:#bbb"> </span>(IOException<span style="color:#bbb"> </span>e)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">					</span>e.<span style="color:#658b00">printStackTrace</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">				</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>result;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#8b008b;font-weight:bold">private</span><span style="color:#bbb"> </span>String<span style="color:#bbb"> </span><span style="color:#008b45">getVerifyKey</span>(HttpServletRequest<span style="color:#bbb"> </span>request)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#228b22">// return request.getRequestedSessionId() + &#34;_Verify&#34;;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>String<span style="color:#bbb"> </span>ipAddrByRequest<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>IPUtils.<span style="color:#658b00">getIpAddr</span>(request);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(ipAddrByRequest.<span style="color:#658b00">contains</span>(<span style="color:#cd5555">&#34;.&#34;</span>))<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>ipAddrByRequest<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>ipAddrByRequest.<span style="color:#658b00">replace</span>(<span style="color:#cd5555">&#34;.&#34;</span>,<span style="color:#bbb"> </span><span style="color:#cd5555">&#34;&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">else</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">if</span><span style="color:#bbb"> </span>(ipAddrByRequest.<span style="color:#658b00">contains</span>(<span style="color:#cd5555">&#34;:&#34;</span>))<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span>ipAddrByRequest<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>ipAddrByRequest.<span style="color:#658b00">replace</span>(<span style="color:#cd5555">&#34;:&#34;</span>,<span style="color:#bbb"> </span><span style="color:#cd5555">&#34;&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#cd5555">&#34;Verify_&#34;</span><span style="color:#bbb"> </span>+<span style="color:#bbb"> </span>ipAddrByRequest;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span>}<span style="color:#bbb">
</span></span></span></code></pre></div><!-- raw HTML omitted -->

                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">最后修改于 2021-06-20</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="/posts/%E9%9D%A2%E8%AF%95%E9%A2%98/">
			下回<br>Java面试题
                </a>
                
                
                
                <a class="older-posts" href="/posts/java/jdk1.8/">
			上回<br>Jdk1.8
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                












            </div>
        </div>
    </div>


                    </div>
            </div><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://brandykk.github.io">
    
        <div class="nav-title">
            Brandy
        </div>
        
        <div class="nav-subtitle">
            个人使用
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/posts">
                Archive
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                Categories
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                Tags
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://risehere.net/">Rise</a>
<br>
移植自 <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	This is a customized copyright.
	

    </div>
    
</div><div id="extraContainer" class="extra-container">
    <div class="toc-wrapper">
        

        
        <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- 目录 -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#utilityjava" class="nav-utilityjava">
									Utility.java
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#imageutiljava" class="nav-imageutiljava">
									ImageUtil.java
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%aa%8c%e8%af%81%e7%a0%81%e8%b0%83%e7%94%a8%e6%96%b9%e6%b3%95%e5%b9%b6%e8%bf%94%e5%9b%9e" class="nav-验证码调用方法并返回">
									验证码调用方法并返回
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
        
    </div>
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top"
            :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
        </a>
        
        
    </div>
</div><div id="single-column-footer">
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://risehere.net/">Rise</a>
<br>
移植自 <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	This is a customized copyright.
	
</div>
            </div>
    
    <script src="/js/journal.js"></script></body>
</html>
