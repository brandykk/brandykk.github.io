<!doctype html><html lang=zh-CN data-theme=dark><head><meta charset=UTF-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: dark)"><meta name=generator content="Hugo 0.123.7"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="spring要点"><meta itemprop=description content="IOC"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://brandykk.github.io/imgs/hugo_next_avatar.png"><meta itemprop=keywords content="java"><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.css><link rel=stylesheet href=/css/main.min.85e230b4b7002592c787b8b9d6c88a3d6a5da0e394813dfbc5fcac2cdee04602.css><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":false,"isHome":false,"isPage":true,"math":{"js":{"file":"es5/tex-mml-chtml.js","name":"mathjax","version":"3.2.0"},"render":"mathjax"},"mermaid":{"js":{"file":"dist/mermaid.min.js","name":"mermaid","version":"9.1.7"}},"path":"spring%E8%A6%81%E7%82%B9","permalink":"https://brandykk.github.io/post/%E7%BC%96%E7%A8%8B/java/spring/spring%E8%A6%81%E7%82%B9/","title":"spring要点","waline":{"js":[{"alias":"waline","alias_name":"@waline/client","file":"dist/pageview.js","name":"pageview","version":"2.13.0"},{"alias":"waline","alias_name":"@waline/client","file":"dist/comment.js","name":"comment","version":"2.13.0"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>spring要点 - BrandyKK</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>BrandyKK</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>简单记录小博客</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about/ class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-archives"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>22</span></a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#1-ioc理论推导>1. IOC理论推导</a><ul><li><a href=#11-原来的写法>1.1. 原来的写法</a><ul><li><a href=#111--userdao接口>1.1.1 UserDao接口</a></li><li><a href=#112-userdaoimpl实现类>1.1.2 UserDaoImpl实现类</a></li><li><a href=#113-userservice业务接口>1.1.3 UserService业务接口</a></li><li><a href=#114-userserviceimpl业务实现类>1.1.4 UserServiceImpl业务实现类</a></li><li><a href=#115-usertest测试>1.1.5 UserTest测试</a></li></ul></li><li><a href=#12-更改之后>1.2 更改之后</a><ul><li><a href=#121-在业务层使用set方法获取dao实现>1.2.1 在业务层使用set方法获取dao实现</a></li><li><a href=#122-usertest调用>1.2.2 UserTest调用</a></li></ul></li><li><a href=#13-hello示例>1.3 Hello示例</a></li></ul></li><li><a href=#2-依赖注入>2. 依赖注入</a></li><li><a href=#3-bean作用域>3. bean作用域</a></li><li><a href=#4-bean自动装配>4. bean自动装配</a><ul><li><a href=#自动装配测试>自动装配测试</a></li><li><a href=#使用注解自动装配>使用注解自动装配</a></li></ul></li><li><a href=#使用注解开发>使用注解开发</a></li><li><a href=#5-使用java方式配置spring>5. 使用java方式配置Spring</a></li><li><a href=#6-代理模式>6. 代理模式</a><ul><li><a href=#61-静态代理>6.1. 静态代理</a></li><li><a href=#62-动态代理>6.2. 动态代理</a></li></ul></li><li><a href=#7-aop>7. AOP</a><ul><li><a href=#1什么是aop>1.什么是AOP</a></li><li><a href=#2-使用spring实现aop>2. 使用Spring实现AOP</a><ul><li><a href=#方式一使用spring的api接口>方式一：使用Spring的API接口</a></li><li><a href=#方式二-自定义实现aop>方式二: 自定义实现AOP</a></li><li><a href=#方式三注解实现>方式三：注解实现</a></li></ul></li></ul></li><li><a href=#8spring整合mybatis>8.Spring整合Mybatis</a><ul><li><a href=#mybatis基础>mybatis基础</a><ul><li><a href=#1-导入依赖包>1. 导入依赖包</a></li><li><a href=#2-mybatis配置文件>2. mybatis配置文件</a></li><li><a href=#3-maper>3. maper</a></li><li><a href=#4-接口>4. 接口</a></li><li><a href=#5-实体类>5. 实体类</a></li><li><a href=#6-测试>6. 测试</a></li></ul></li><li><a href=#整合方式一>整合方式一</a><ul><li><a href=#1编写数据源>1.编写数据源</a></li><li><a href=#2-sqlsessionfactory>2. sqlSessionFactory</a></li><li><a href=#3sqlsessiontemplate>3.sqlSessionTemplate</a></li><li><a href=#4给接口添加实现类>4.给接口添加实现类</a></li><li><a href=#5将实现类注入到spring>5.将实现类注入到spring</a></li><li><a href=#6测试>6.测试</a></li></ul></li><li><a href=#方式二>方式二</a></li><li><a href=#spring控制事务>spring控制事务</a></li></ul></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=brandyKK src=/imgs/img-lazy-loading.gif data-src=/imgs/hugo_next_avatar.png><p class=site-author-name itemprop=name>brandyKK</p><div class=site-description itemprop=description>个人简单记录一些文档</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>22</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>3</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>8</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=共享知识><img src=/imgs/img-lazy-loading.gif data-src=/imgs/cc/big/by_nc_sa.svg alt=共享知识></a></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://gitee.com/hugo-next/hugo-theme-next title=https://gitee.com/hugo-next/hugo-theme-next target=_blank>Hugo-NexT</a></li></ul></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-gtranslate class=button title=多语言翻译><i class="fas fa-globe"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://brandykk.github.io/post/%E7%BC%96%E7%A8%8B/java/spring/spring%E8%A6%81%E7%82%B9/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/hugo_next_avatar.png"><meta itemprop=name content="brandyKK"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="brandyKK"><meta itemprop=description content="个人简单记录一些文档"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="spring要点"><meta itemprop=description content="IOC"></span><header class=post-header><h1 class=post-title itemprop="name headline">spring要点</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2024-03-07 14:40:15 +0800 CST" itemprop="dateCreated datePublished" datetime="2024-03-07 14:40:15 +0800 CST">2024-03-07
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/%E7%BC%96%E7%A8%8B itemprop=url rel=index><span itemprop=name>编程</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="far fa-file-word"></i>
</span><span class=post-meta-item-text>字数：</span>
<span>9407</span>
</span><span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="far fa-clock"></i>
</span><span class=post-meta-item-text>阅读：&ap;</span>
<span>19分钟</span></span></div></div></header><div class="post-body autonumber" itemprop=articleBody><h2 id=1-ioc理论推导>1. IOC理论推导
<a class=header-anchor href=#1-ioc%e7%90%86%e8%ae%ba%e6%8e%a8%e5%af%bc></a></h2><h3 id=11-原来的写法>1.1. 原来的写法
<a class=header-anchor href=#11-%e5%8e%9f%e6%9d%a5%e7%9a%84%e5%86%99%e6%b3%95></a></h3><h4 id=111--userdao接口>1.1.1 UserDao接口
<a class=header-anchor href=#111--userdao%e6%8e%a5%e5%8f%a3></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>UserDao</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>getUser</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=112-userdaoimpl实现类>1.1.2 UserDaoImpl实现类
<a class=header-anchor href=#112-userdaoimpl%e5%ae%9e%e7%8e%b0%e7%b1%bb></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserDaoImpl</span> <span style=color:#66d9ef>implements</span> UserDao {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>getUser</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;默认获取用户数据&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=113-userservice业务接口>1.1.3 UserService业务接口
<a class=header-anchor href=#113-userservice%e4%b8%9a%e5%8a%a1%e6%8e%a5%e5%8f%a3></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>IUserService</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>getUser</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=114-userserviceimpl业务实现类>1.1.4 UserServiceImpl业务实现类
<a class=header-anchor href=#114-userserviceimpl%e4%b8%9a%e5%8a%a1%e5%ae%9e%e7%8e%b0%e7%b1%bb></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserServiceImpl</span> <span style=color:#66d9ef>implements</span> IUserService {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> UserDao userDao <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> UserDaoImpl();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>getUser</span>() {
</span></span><span style=display:flex><span>        userDao.<span style=color:#a6e22e>getUser</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=115-usertest测试>1.1.5 UserTest测试
<a class=header-anchor href=#115-usertest%e6%b5%8b%e8%af%95></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserTest</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>//用户实际调用的业务层，Dao层不会直接调用</span>
</span></span><span style=display:flex><span>        IUserService userService <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> UserServiceImpl();
</span></span><span style=display:flex><span>        userService.<span style=color:#a6e22e>getUser</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>缺点： 当Dao层需要增加需求时，service业务层的代码也需要跟着改变，耦合度太高</p><h3 id=12-更改之后>1.2 更改之后
<a class=header-anchor href=#12-%e6%9b%b4%e6%94%b9%e4%b9%8b%e5%90%8e></a></h3><h4 id=121-在业务层使用set方法获取dao实现>1.2.1 在业务层使用set方法获取dao实现
<a class=header-anchor href=#121-%e5%9c%a8%e4%b8%9a%e5%8a%a1%e5%b1%82%e4%bd%bf%e7%94%a8set%e6%96%b9%e6%b3%95%e8%8e%b7%e5%8f%96dao%e5%ae%9e%e7%8e%b0></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserServiceImpl</span> <span style=color:#66d9ef>implements</span> IUserService {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> UserDao userDao;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setUserDao</span>(UserDao userDao) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>userDao</span> <span style=color:#f92672>=</span> userDao;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>getUser</span>() {
</span></span><span style=display:flex><span>        userDao.<span style=color:#a6e22e>getUser</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=122-usertest调用>1.2.2 UserTest调用
<a class=header-anchor href=#122-usertest%e8%b0%83%e7%94%a8></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserTest</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>//用户实际调用的业务层，Dao层不会直接调用</span>
</span></span><span style=display:flex><span>        UserServiceImpl userService <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> UserServiceImpl();
</span></span><span style=display:flex><span>        userService.<span style=color:#a6e22e>setUserDao</span>(<span style=color:#66d9ef>new</span> UserDaoMysqlImpl());
</span></span><span style=display:flex><span>        userService.<span style=color:#a6e22e>getUser</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li>这样在dao层添加新逻辑时，service不需要改动，只需要改变调用就可以，耦合度大大降低。</li></ul><blockquote><p>控制反转IOC（Inversion of Control），是一种设计思想，DI（依赖注入）是实现IOC的一种方法。IOC是Spring框架的核心内容。</p></blockquote><blockquote><p>Spring容器在初始化时先读取配置文件，根据配置文件或元数据创建与组织对象存入容器中，程序使用时再从IOC容器中取出需要的对象。</p><p><img src=/imgs/img-lazy-loading.gif data-src=spring-IOC.assets/image-20210728223218678.png alt=image-20210728223218678></p><p>采用XML方式配置Bean的时候，Bean的定义信息是和实现分离的，而采用注解的方式可以把两者合为一体，Bean的定义信息直接以注解的形式定义在实现类中，从而达到了零配置的目的。</p></blockquote><p><strong>控制反转是一种通过描述（XML或注解）并通过第三方去生产或获取特定对象的方式，在Sring中实现控制反转的是IOC容器，其实现方式是依赖注入（Dependency Injection,DI）。</strong></p><h3 id=13-hello示例>1.3 Hello示例
<a class=header-anchor href=#13-hello%e7%a4%ba%e4%be%8b></a></h3><ol><li><p><code>Hello.Class</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Hello</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String str;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getStr</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> str;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setStr</span>(String str) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>str</span> <span style=color:#f92672>=</span> str;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>toString</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;Hello{&#34;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;str=&#39;&#34;</span> <span style=color:#f92672>+</span> str <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\&#39;&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;}&#39;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p><code>bean.xml</code></p></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--使用Spring创建对象，在Spring中这些都称为Bean--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--
</span></span></span><span style=display:flex><span><span style=color:#75715e>    类型  变量名 =   new     类型（）
</span></span></span><span style=display:flex><span><span style=color:#75715e>    Hello hello = new Hello();
</span></span></span><span style=display:flex><span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>    id: 变量名
</span></span></span><span style=display:flex><span><span style=color:#75715e>    class: new 的对象
</span></span></span><span style=display:flex><span><span style=color:#75715e>    property： 相当于给属性赋值
</span></span></span><span style=display:flex><span><span style=color:#75715e>	ref : 引用Spring容器中创建的对象
</span></span></span><span style=display:flex><span><span style=color:#75715e>	value： 给具体的属性赋值
</span></span></span><span style=display:flex><span><span style=color:#75715e>    --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;hello&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;lv.Hello&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;str&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;Spring&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/bean&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--    &lt;bean id=&#34;userDao&#34; class=&#34;lv.dao.impl.UserDaoImpl&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--    &lt;bean id=&#34;userDaoMysql&#34; class=&#34;lv.dao.impl.UserDaoMysqlImpl&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--    &lt;bean id=&#34;userService&#34; class=&#34;lv.service.impl.UserServiceImpl&#34;&gt;--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--        &lt;property name=&#34;userDao&#34; ref=&#34;userDao&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--    &lt;/bean&gt;--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></div><ol start=3><li><p>测试类</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> lv.Hello;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.context.ApplicationContext;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.context.support.ClassPathXmlApplicationContext;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>HelloTest</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>//获取Spring的上下文对象</span>
</span></span><span style=display:flex><span>        ApplicationContext applicationContext <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ClassPathXmlApplicationContext(<span style=color:#e6db74>&#34;bean.xml&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#75715e>//获取XML中设置的bean</span>
</span></span><span style=display:flex><span>        Hello hello <span style=color:#f92672>=</span> (Hello) applicationContext.<span style=color:#a6e22e>getBean</span>(<span style=color:#e6db74>&#34;hello&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(hello);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li></ol><ul><li>Hello对象是由Spring创建的</li><li>Hello对象的属性由Spring容器设置</li></ul><p>这个过程就叫控制反转：</p><p>控制：谁来控制对象的创建，传统应用程序的对象是由程序本身控制创建的，使用Spring后，对象是由Spring创建。</p><p>反转：程序本身不创建对象，而变成被动的接受对象。</p><p>依赖注入：利用set方法来进行注入的</p><p>IOC是一种编程思想，由主动的编程变成被动的接收。</p><blockquote><p><strong>对象由Spring来创建、管理、装配！</strong></p><p><strong>在配置文件加载的时候，容器中的对象已经初始化</strong></p></blockquote><h2 id=2-依赖注入>2. 依赖注入
<a class=header-anchor href=#2-%e4%be%9d%e8%b5%96%e6%b3%a8%e5%85%a5></a></h2><ul><li>构造器注入</li></ul><p>上面的就是构造器注入</p><ul><li><p>set方法注入</p><ul><li>依赖： bean对象的创建依赖于容器</li><li>注入： bean对象中的所有属性，由容器来注入</li></ul><p>[环境搭建]</p><ol><li><p>复杂类型</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> lv;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Address</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String address;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getAddress</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> address;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setAddress</span>(String address) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>address</span> <span style=color:#f92672>=</span> address;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>toString</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;Address{&#34;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;address=&#39;&#34;</span> <span style=color:#f92672>+</span> address <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\&#39;&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;}&#39;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>真实测试对象</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> lv;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.*;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Students</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String name;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Address address;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String<span style=color:#f92672>[]</span> books;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> hobbys;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Map<span style=color:#f92672>&lt;</span>String,String<span style=color:#f92672>&gt;</span> card;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Set<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> games;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Properties info;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String wife;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getName</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> name;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setName</span>(String name) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> name;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Address <span style=color:#a6e22e>getAddress</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> address;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setAddress</span>(Address address) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>address</span> <span style=color:#f92672>=</span> address;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String<span style=color:#f92672>[]</span> <span style=color:#a6e22e>getBooks</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> books;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setBooks</span>(String<span style=color:#f92672>[]</span> books) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>books</span> <span style=color:#f92672>=</span> books;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>getHobbys</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> hobbys;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setHobbys</span>(List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> hobbys) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>hobbys</span> <span style=color:#f92672>=</span> hobbys;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Map<span style=color:#f92672>&lt;</span>String, String<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>getCard</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> card;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setCard</span>(Map<span style=color:#f92672>&lt;</span>String, String<span style=color:#f92672>&gt;</span> card) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>card</span> <span style=color:#f92672>=</span> card;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Set<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>getGames</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> games;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setGames</span>(Set<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> games) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>games</span> <span style=color:#f92672>=</span> games;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Properties <span style=color:#a6e22e>getInfo</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> info;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setInfo</span>(Properties info) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>info</span> <span style=color:#f92672>=</span> info;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getWife</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> wife;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setWife</span>(String wife) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>wife</span> <span style=color:#f92672>=</span> wife;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>toString</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;Students{&#34;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;name=&#39;&#34;</span> <span style=color:#f92672>+</span> name <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\&#39;&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;, address=&#34;</span> <span style=color:#f92672>+</span> address <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;, books=&#34;</span> <span style=color:#f92672>+</span> Arrays.<span style=color:#a6e22e>toString</span>(books) <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;, hobbys=&#34;</span> <span style=color:#f92672>+</span> hobbys <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;, card=&#34;</span> <span style=color:#f92672>+</span> card <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;, games=&#34;</span> <span style=color:#f92672>+</span> games <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;, info=&#34;</span> <span style=color:#f92672>+</span> info <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;, wife=&#39;&#34;</span> <span style=color:#f92672>+</span> wife <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\&#39;&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;}&#39;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>bean.xml</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>&lt;?</span>xml version<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1.0&#34;</span> encoding<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;UTF-8&#34;</span><span style=color:#f92672>?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;</span>beans xmlns<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       xmlns:xsi<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       xsi:schemaLocation<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;!--</span>注入bean<span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span>bean id<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;address&#34;</span> <span style=color:#66d9ef>class</span><span style=color:#960050;background-color:#1e0010>=&#34;</span><span style=color:#a6e22e>lv</span>.<span style=color:#a6e22e>Address</span><span style=color:#e6db74>&#34;/&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;bean id=&#34;</span>student<span style=color:#e6db74>&#34; class=&#34;</span>lv.<span style=color:#a6e22e>Students</span><span style=color:#e6db74>&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;!--第一种：普通的值注入，value--&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;property name=&#34;</span>name<span style=color:#e6db74>&#34; value=&#34;</span>斌<span style=color:#e6db74>&#34;/&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;!--第二种： bean注入，ref--&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;property name=&#34;</span>address<span style=color:#e6db74>&#34; ref=&#34;</span>address<span style=color:#e6db74>&#34;/&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;!--数组注入：ref--&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;property name=&#34;</span>books<span style=color:#e6db74>&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;array&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &lt;value&gt;西游记&lt;/value&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &lt;value&gt;红楼梦&lt;/value&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &lt;value&gt;三国&lt;/value&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &lt;value&gt;水浒&lt;/value&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;/array&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;/property&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;!--list注入：ref--&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;property name=&#34;</span>hobbys<span style=color:#e6db74>&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;list&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &lt;value&gt;听歌&lt;/value&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &lt;value&gt;打球&lt;/value&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;/list&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;/property&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;!--map注入： ref--&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;property name=&#34;</span>card<span style=color:#e6db74>&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;map&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &lt;entry key=&#34;</span>身份证<span style=color:#e6db74>&#34; value=&#34;</span>123456<span style=color:#e6db74>&#34;/&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &lt;entry key=&#34;</span>银行卡<span style=color:#e6db74>&#34; value=&#34;</span>456789<span style=color:#e6db74>&#34;/&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;/map&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;/property&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;!--set注入： ref--&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;property name=&#34;</span>games<span style=color:#e6db74>&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;set&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &lt;value&gt;LOL&lt;/value&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &lt;value&gt;GTA5&lt;/value&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;/set&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;/property&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;!--null注入--&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;property name=&#34;</span>wife<span style=color:#e6db74>&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;null/&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;/property&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;!--properties注入： ref--&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;property name=&#34;</span>info<span style=color:#e6db74>&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;props&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &lt;prop key=&#34;</span>sql<span style=color:#e6db74>&#34;&gt;mysql&lt;/prop&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &lt;prop key=&#34;</span>port<span style=color:#e6db74>&#34;&gt;8080&lt;/prop&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;/props&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;/property&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;/bean&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&lt;/beans&gt;
</span></span></span></code></pre></div></li><li><p>测试类</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) {
</span></span><span style=display:flex><span>        ApplicationContext app <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ClassPathXmlApplicationContext(<span style=color:#e6db74>&#34;application.xml&#34;</span>);
</span></span><span style=display:flex><span>        Students student <span style=color:#f92672>=</span> (Students) app.<span style=color:#a6e22e>getBean</span>(<span style=color:#e6db74>&#34;student&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(student);
</span></span><span style=display:flex><span>    <span style=color:#75715e>//输出： Students{name=&#39;斌&#39;, address=Address{address=&#39;null&#39;}, books=[西游记, 红楼梦, 三国, 水浒], hobbys=[听歌, 打球], card={身份证=123456, 银行卡=456789}, games=[LOL, GTA5], info={port=8080, sql=mysql}, wife=&#39;null&#39;}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div></li></ol></li><li><p>拓展方式注入</p><ul><li><p>p命名空间</p><ul><li><p>例子</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> lv;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String name;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> age;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getName</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> name;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setName</span>(String name) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> name;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getAge</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> age;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setAge</span>(<span style=color:#66d9ef>int</span> age) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>age</span> <span style=color:#f92672>=</span> age;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>toString</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;User{&#34;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;name=&#39;&#34;</span> <span style=color:#f92672>+</span> name <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\&#39;&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;, age=&#34;</span> <span style=color:#f92672>+</span> age <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;}&#39;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>bean.xml</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:p=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/p&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--p命名空间 可以直接给属性注入值： property
</span></span></span><span style=display:flex><span><span style=color:#75715e>        需要在上面配置上：xmlns:p=&#34;http://www.springframework.org/schema/p&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>    --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;user&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;lv.User&#34;</span> <span style=color:#a6e22e>p:name=</span><span style=color:#e6db74>&#34;名字&#34;</span> <span style=color:#a6e22e>p:age=</span><span style=color:#e6db74>&#34;188&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></div></li><li><p>测试类</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@org.junit.Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>ptest</span>() {
</span></span><span style=display:flex><span>        ApplicationContext app <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ClassPathXmlApplicationContext(<span style=color:#e6db74>&#34;bean.xml&#34;</span>);
</span></span><span style=display:flex><span>        User user <span style=color:#f92672>=</span> (User) app.<span style=color:#a6e22e>getBean</span>(<span style=color:#e6db74>&#34;user&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(user);
</span></span><span style=display:flex><span>    <span style=color:#75715e>//输出： User{name=&#39;名字&#39;, age=188}</span>
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div></li></ul></li><li><p>c命名空间</p><ul><li><p>例子</p><blockquote><p>需要有构造器</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> lv;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String name;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> age;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>User</span>() {
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>User</span>(String name, <span style=color:#66d9ef>int</span> age) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> name;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>age</span> <span style=color:#f92672>=</span> age;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getName</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> name;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setName</span>(String name) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> name;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getAge</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> age;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setAge</span>(<span style=color:#66d9ef>int</span> age) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>age</span> <span style=color:#f92672>=</span> age;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>toString</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;User{&#34;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;name=&#39;&#34;</span> <span style=color:#f92672>+</span> name <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\&#39;&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;, age=&#34;</span> <span style=color:#f92672>+</span> age <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;}&#39;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>bean.xml</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:c=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/c&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--c命名空间 可以直接给属性注入值： 需要构造器
</span></span></span><span style=display:flex><span><span style=color:#75715e>            需要在上面配置上：xmlns:c=&#34;http://www.springframework.org/schema/c&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>        --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;user2&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;lv.User&#34;</span> <span style=color:#a6e22e>c:name=</span><span style=color:#e6db74>&#34;构造器&#34;</span> <span style=color:#a6e22e>c:age=</span><span style=color:#e6db74>&#34;188&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></div></li><li><p>测试类</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@org.junit.Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>ptest</span>() {
</span></span><span style=display:flex><span>        ApplicationContext app <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ClassPathXmlApplicationContext(<span style=color:#e6db74>&#34;bean.xml&#34;</span>);
</span></span><span style=display:flex><span>        User user <span style=color:#f92672>=</span> (User) app.<span style=color:#a6e22e>getBean</span>(<span style=color:#e6db74>&#34;user2&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(user);
</span></span><span style=display:flex><span>    <span style=color:#75715e>//输出： User{name=&#39;构造器&#39;, age=188}</span>
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div></li></ul></li></ul></li></ul><h2 id=3-bean作用域>3. bean作用域
<a class=header-anchor href=#3-bean%e4%bd%9c%e7%94%a8%e5%9f%9f></a></h2><p><img src=/imgs/img-lazy-loading.gif data-src=spring-IOC.assets/image-20210801145956243.png alt=image-20210801145956243></p><ol><li><p>单例模式（Spring默认机制）</p><blockquote><p>只创建一个对象，所有bean共享一个对象</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;!--使用scope设置--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;user2&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;lv.User&#34;</span> <span style=color:#a6e22e>c:name=</span><span style=color:#e6db74>&#34;构造器&#34;</span> <span style=color:#a6e22e>c:age=</span><span style=color:#e6db74>&#34;188&#34;</span> <span style=color:#a6e22e>scope=</span><span style=color:#e6db74>&#34;singleton&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span></code></pre></div></li><li><p>原型模式</p><blockquote><p>每一个bean都创建一个单独的对象</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>&lt;</span>bean id<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;user2&#34;</span> <span style=color:#66d9ef>class</span><span style=color:#960050;background-color:#1e0010>=&#34;</span><span style=color:#a6e22e>lv</span>.<span style=color:#a6e22e>User</span><span style=color:#e6db74>&#34; c:name=&#34;</span>构造器<span style=color:#e6db74>&#34; c:age=&#34;</span>188<span style=color:#e6db74>&#34; scope=&#34;</span>prototype<span style=color:#e6db74>&#34;/&gt;
</span></span></span></code></pre></div></li><li><p>其他的只能在web开发中使用到</p></li></ol><h2 id=4-bean自动装配>4. bean自动装配
<a class=header-anchor href=#4-bean%e8%87%aa%e5%8a%a8%e8%a3%85%e9%85%8d></a></h2><ul><li>自动装配是Spring满足bean依赖的一种方式</li><li>Spring会在上下文中自动寻找，并自动给bean装配属性</li></ul><p>在spring中有三种装配方式</p><ol><li>在xml中显示的配置</li><li>在java中显示配置</li><li>隐式的自动装配bean「重要」</li></ol><h3 id=自动装配测试>自动装配测试
<a class=header-anchor href=#%e8%87%aa%e5%8a%a8%e8%a3%85%e9%85%8d%e6%b5%8b%e8%af%95></a></h3><ul><li><p>例子</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Cat</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>shout</span>(){
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;瞄&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Dog</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>shout</span>(){
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;汪&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>package</span> lv;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>People</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Dog dog;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Cat cat;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String name;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Dog <span style=color:#a6e22e>getDog</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> dog;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setDog</span>(Dog dog) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>dog</span> <span style=color:#f92672>=</span> dog;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Cat <span style=color:#a6e22e>getCat</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> cat;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setCat</span>(Cat cat) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cat</span> <span style=color:#f92672>=</span> cat;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getName</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> name;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setName</span>(String name) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> name;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>toString</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;People{&#34;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;dog=&#34;</span> <span style=color:#f92672>+</span> dog <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;, cat=&#34;</span> <span style=color:#f92672>+</span> cat <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;, name=&#39;&#34;</span> <span style=color:#f92672>+</span> name <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\&#39;&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;}&#39;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>bean.xml</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;dog&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;lv.Dog&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;cat&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;lv.Cat&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--普通的写法--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--    &lt;bean id=&#34;people&#34; class=&#34;lv.People&#34;&gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--        &lt;property name=&#34;name&#34; value=&#34;小明&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--        &lt;property name=&#34;cat&#34; ref=&#34;cat&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--        &lt;property name=&#34;dog&#34; ref=&#34;dog&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--    &lt;/bean&gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--自动装配 autowire:
</span></span></span><span style=display:flex><span><span style=color:#75715e>        byName ： 会自动在容器上下文中查找，和自己对象set方法后面的值对应的beanid
</span></span></span><span style=display:flex><span><span style=color:#75715e>        byType : 会自动在容器上下文中查找，和自己对象属性类型相同的bean
</span></span></span><span style=display:flex><span><span style=color:#75715e>    --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;people&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;lv.People&#34;</span> <span style=color:#a6e22e>autowire=</span><span style=color:#e6db74>&#34;byName&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;name&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;小明&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/bean&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></div></li><li><p>测试类</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span> <span style=color:#a6e22e>@org.junit.Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>peopletest</span>() {
</span></span><span style=display:flex><span>        ApplicationContext app <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ClassPathXmlApplicationContext(<span style=color:#e6db74>&#34;bean.xml&#34;</span>);
</span></span><span style=display:flex><span>        People people <span style=color:#f92672>=</span> app.<span style=color:#a6e22e>getBean</span>(<span style=color:#e6db74>&#34;people&#34;</span>, People.<span style=color:#a6e22e>class</span>);
</span></span><span style=display:flex><span>        people.<span style=color:#a6e22e>getCat</span>().<span style=color:#a6e22e>shout</span>();
</span></span><span style=display:flex><span>        people.<span style=color:#a6e22e>getDog</span>().<span style=color:#a6e22e>shout</span>();
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div></li></ul><blockquote><p>byname： 需要保证所有bean的id唯一，并且需要和自动注入的属性的set方法的值一致</p><p>bytype ： 需要保证所有bean的class唯一，并且需要和自动注入的属性的类型一致</p></blockquote><h3 id=使用注解自动装配>使用注解自动装配
<a class=header-anchor href=#%e4%bd%bf%e7%94%a8%e6%b3%a8%e8%a7%a3%e8%87%aa%e5%8a%a8%e8%a3%85%e9%85%8d></a></h3><blockquote><p>JDK1.5，Spring2.5支持注解</p></blockquote><ul><li><p>导入约束</p></li><li><p>配置注解支持</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:context=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/context&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        http://www.springframework.org/schema/beans/spring-beans.xsd
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        http://www.springframework.org/schema/context
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        http://www.springframework.org/schema/context/spring-context.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--需要导入 xmlns:context=&#34;http://www.springframework.org/schema/context&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>        在xsi:schemaLocation中加入 ： http://www.springframework.org/schema/context
</span></span></span><span style=display:flex><span><span style=color:#75715e>        http://www.springframework.org/schema/context/spring-context.xsd&#34;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--开启注解支持--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;context:annotation-config/&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;dog&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;lv.Dog&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;cat&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;lv.Cat&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;people&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;lv.People&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></div><p>测试：</p><p>在bean上加注解<code>@Autowired</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> lv;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.beans.factory.annotation.Autowired;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>People</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Autowired</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Dog dog;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Autowired</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Cat cat;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String name;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Dog <span style=color:#a6e22e>getDog</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> dog;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setDog</span>(Dog dog) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>dog</span> <span style=color:#f92672>=</span> dog;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Cat <span style=color:#a6e22e>getCat</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> cat;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setCat</span>(Cat cat) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cat</span> <span style=color:#f92672>=</span> cat;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getName</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> name;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setName</span>(String name) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> name;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>toString</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;People{&#34;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;dog=&#34;</span> <span style=color:#f92672>+</span> dog <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;, cat=&#34;</span> <span style=color:#f92672>+</span> cat <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;, name=&#39;&#34;</span> <span style=color:#f92672>+</span> name <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\&#39;&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;}&#39;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li></ul><ol start=5><li><h2 id=使用注解开发>使用注解开发
<a class=header-anchor href=#%e4%bd%bf%e7%94%a8%e6%b3%a8%e8%a7%a3%e5%bc%80%e5%8f%91></a></h2><ol><li>在Spring4之后，使用注解开发必须保证aop包导入</li></ol><p><img src=/imgs/img-lazy-loading.gif data-src=spring-IOC.assets/image-20210801161040115.png alt=image-20210801161040115></p></li></ol><p>使用注解需要导入context约束，增加注解支持</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:context=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/context&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        http://www.springframework.org/schema/beans/spring-beans.xsd
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        http://www.springframework.org/schema/context
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        http://www.springframework.org/schema/context/spring-context.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--需要导入 xmlns:context=&#34;http://www.springframework.org/schema/context&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>        在xsi:schemaLocation中加入 ： http://www.springframework.org/schema/context
</span></span></span><span style=display:flex><span><span style=color:#75715e>        http://www.springframework.org/schema/context/spring-context.xsd&#34;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--开启注解支持--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;context:annotation-config/&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></div><ol start=2><li><p>属性注入</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> lv.pojo;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.beans.factory.annotation.Value;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.stereotype.Component;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @Component： 组件 等价于： &lt;bean id=&#34;user&#34; class=&#34;lv.pojo.User&#34;/&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Component</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @Value(&#34;小明&#34;)：给属性赋值 等价于 &lt;property name=&#34;name&#34; value=&#34;小明&#34;/&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Value</span>(<span style=color:#e6db74>&#34;小明&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String name;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//    @Value(&#34;小明&#34;)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//    public void setName(String name) {</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//        this.name = name;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//    }</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>衍生的注解</p><p><code>@Component</code>衍生注解</p><ul><li><p><code>@Repository</code> : dao层注解</p></li><li><p><code>@Service</code> : service层注解</p></li><li><p><code>@Controller</code> : controller层注解</p><blockquote><p>都代表将类注入到Srping中，装配bean</p></blockquote></li></ul></li></ol><h2 id=5-使用java方式配置spring>5. 使用java方式配置Spring
<a class=header-anchor href=#5-%e4%bd%bf%e7%94%a8java%e6%96%b9%e5%bc%8f%e9%85%8d%e7%bd%aespring></a></h2><p>完全不使用xml，全部交给java</p><blockquote><p>javaConfig是一个子项目，在Spring4之后成为核心功能</p></blockquote><ul><li><p>实体类</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> lv.pojo;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.beans.factory.annotation.Value;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.stereotype.Component;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Component</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Value</span>(<span style=color:#e6db74>&#34;小明&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String name;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Value</span>(<span style=color:#e6db74>&#34;18&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> age;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getName</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> name;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setName</span>(String name) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> name;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getAge</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> age;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setAge</span>(<span style=color:#66d9ef>int</span> age) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>age</span> <span style=color:#f92672>=</span> age;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>toString</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;User{&#34;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;name=&#39;&#34;</span> <span style=color:#f92672>+</span> name <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\&#39;&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;, age=&#34;</span> <span style=color:#f92672>+</span> age <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;}&#39;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>配置类</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> lv.config;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> lv.pojo.User;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.context.annotation.Bean;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.context.annotation.Configuration;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @Configuration: 配置类，相当于原来的xml
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Configuration</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LvConfig</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> User <span style=color:#a6e22e>getUser</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> User();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>测试类</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> lv.config.LvConfig;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> lv.pojo.User;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.context.ApplicationContext;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Test</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) {
</span></span><span style=display:flex><span>        ApplicationContext app <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AnnotationConfigApplicationContext(LvConfig.<span style=color:#a6e22e>class</span>);
</span></span><span style=display:flex><span>        User user <span style=color:#f92672>=</span> app.<span style=color:#a6e22e>getBean</span>(<span style=color:#e6db74>&#34;getUser&#34;</span>, User.<span style=color:#a6e22e>class</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(user);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li></ul><h2 id=6-代理模式>6. 代理模式
<a class=header-anchor href=#6-%e4%bb%a3%e7%90%86%e6%a8%a1%e5%bc%8f></a></h2><ul><li>静态代理</li><li>动态代理</li></ul><p><img src=/imgs/img-lazy-loading.gif data-src=spring-IOC.assets/image-20210801165008933.png alt=image-20210801165008933></p><h3 id=61-静态代理>6.1. 静态代理
<a class=header-anchor href=#61-%e9%9d%99%e6%80%81%e4%bb%a3%e7%90%86></a></h3><p>角色分析：</p><ul><li>抽象角色：一般会使用接口或抽象类解决</li><li>真实角色： 被代理的角色</li><li>代理角色： 代理真实角色后，一般会做一些附属操作</li><li>客户： 访问代理对象的人</li></ul><p>代码步骤：</p><ol><li><p>接口</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//租房</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Rent</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>rent</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>真实角色</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//房东</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Host</span> <span style=color:#66d9ef>implements</span> Rent{
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>rent</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;房东要租房&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>代理角色</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> lv.demo01;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Proxy</span> <span style=color:#66d9ef>implements</span> Rent {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Host host;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Proxy</span>() {
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Proxy</span>(Host host) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>host</span> <span style=color:#f92672>=</span> host;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>rent</span>() {
</span></span><span style=display:flex><span>        seeHonse();
</span></span><span style=display:flex><span>        host.<span style=color:#a6e22e>rent</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>seeHonse</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;中介看房&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>客户访问</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) {
</span></span><span style=display:flex><span>        Proxy proxy <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Proxy(<span style=color:#66d9ef>new</span> Host());
</span></span><span style=display:flex><span>        proxy.<span style=color:#a6e22e>rent</span>();
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div></li></ol><p>代理模式的好处：</p><ul><li>可以是真实角色的操作更加纯粹！不去关注公共业务</li><li>公共业务交给代理，实现业务分工</li><li>公共业务扩展的时候，方便集中管理</li></ul><p>缺点：</p><ul><li>一个真实角色就会产生一个代理角色；开发效率太低</li></ul><p><img src=/imgs/img-lazy-loading.gif data-src=spring-IOC.assets/image-20210801170626012.png alt=image-20210801170626012></p><h3 id=62-动态代理>6.2. 动态代理
<a class=header-anchor href=#62-%e5%8a%a8%e6%80%81%e4%bb%a3%e7%90%86></a></h3><ul><li>和静态代理角色一样</li><li>动态代理的代理类是动态生成的</li><li>动态代理分为两大类<ul><li>基于接口的动态代理<ul><li>JDK动态代理</li></ul></li><li>基于类的动态代理<ul><li>cglib</li></ul></li><li>java字节码实现<ul><li>javassist</li></ul></li></ul></li></ul><p>需要了解两个类：Proxy：代理, invocationHandler: 调用处理程序</p><ol><li><p>接口</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//租房</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Rent</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>rent</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>真实对象</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//房东</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Host</span> <span style=color:#66d9ef>implements</span> Rent {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>rent</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;房东要租房&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>处理程序</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> lv.demo02;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.lang.reflect.InvocationHandler;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.lang.reflect.Method;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.lang.reflect.Proxy;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 自动生成代理类
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ProxyInvocationHandler</span> <span style=color:#66d9ef>implements</span> InvocationHandler {
</span></span><span style=display:flex><span>    <span style=color:#75715e>//被代理的接口</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Object obj;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//处理代理实例并返回结果</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Object <span style=color:#a6e22e>invoke</span>(Object proxy, Method method, Object<span style=color:#f92672>[]</span> args) <span style=color:#66d9ef>throws</span> Throwable {
</span></span><span style=display:flex><span>        Object invoke <span style=color:#f92672>=</span> method.<span style=color:#a6e22e>invoke</span>(obj, args);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> invoke;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//得到生成的代理类</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Object <span style=color:#a6e22e>getProxy</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Proxy.<span style=color:#a6e22e>newProxyInstance</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>getClass</span>().<span style=color:#a6e22e>getClassLoader</span>(), obj.<span style=color:#a6e22e>getClass</span>().<span style=color:#a6e22e>getInterfaces</span>(), <span style=color:#66d9ef>this</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setObj</span>(Object obj) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>obj</span> <span style=color:#f92672>=</span> obj;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>调用</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> lv.demo02;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Test</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>//真实角色</span>
</span></span><span style=display:flex><span>        Host host <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Host();
</span></span><span style=display:flex><span>        <span style=color:#75715e>//代理角色： 现在没有</span>
</span></span><span style=display:flex><span>        ProxyInvocationHandler pr <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ProxyInvocationHandler();
</span></span><span style=display:flex><span>        <span style=color:#75715e>//通过调用程序处理角色来处理我们要调用的接口对象</span>
</span></span><span style=display:flex><span>        pr.<span style=color:#a6e22e>setObj</span>(host);
</span></span><span style=display:flex><span>        <span style=color:#75715e>//获取代理角色： 这里是动态生成的</span>
</span></span><span style=display:flex><span>        Rent rent <span style=color:#f92672>=</span> (Rent) pr.<span style=color:#a6e22e>getProxy</span>();
</span></span><span style=display:flex><span>        rent.<span style=color:#a6e22e>rent</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>好处：</p><ul><li><p>有静态代理的所有好处</p></li><li><p>一个动态代理类可以代理多个类，只要实现了同一个接口</p></li></ul></li></ol><h2 id=7-aop>7. AOP
<a class=header-anchor href=#7-aop></a></h2><h3 id=1什么是aop>1.什么是AOP
<a class=header-anchor href=#1%e4%bb%80%e4%b9%88%e6%98%afaop></a></h3><p>AOP（Aspect Oriented Programming）意为：面向切面编程，通过预编译方式和运行期动态代理实现程序功能的统一维护的一种技术。AOP是OOP的延续，是软件开发中的一个热点，也是Spring中的重要内容，是函数式编程的一种衍生范型。利用AOP可以对业务逻辑进行隔离，从而使得业务逻辑各部分之间的耦合度降低，提高程序的可重用性，同时提高开发效率。</p><p><img src=/imgs/img-lazy-loading.gif data-src=spring-IOC.assets/image-20210801174416415.png alt=image-20210801174416415></p><p>==提供声明式事物，允许用户自定义切面==</p><ul><li>横切关注点：跨越应用程序多个模块的方法或功能。即是：与我们业务逻辑无关的，但是我们需要关注的部分，就是横切关注点。如 日志、安全、缓存、事物等</li><li>切面（ASPECT）：横切关注点被模块化的特殊对象。即 一个类</li><li>通知（Advice）：切面必须完成的工作。即：类中的一个方法</li><li>目标（Target）：被通知对象</li><li>代理（Proxy）：向目标对象应用通知之后创建的对象。</li><li>切入点（PointCut）：切面通知执行的“地点”的定义</li><li>连接点（JointPoint）：与切入点匹配的执行点</li></ul><p><img src=/imgs/img-lazy-loading.gif data-src=spring-IOC.assets/image-20210801180433641.png alt=image-20210801180433641></p><p>SpringAop中，通过Advice定义横切逻辑，Spring支持5中类型的Advice</p><p><img src=/imgs/img-lazy-loading.gif data-src=spring-IOC.assets/image-20210801180545277.png alt=image-20210801180545277></p><p>即：AOP在不改变原代码的情况下，增加新功能。</p><h3 id=2-使用spring实现aop>2. 使用Spring实现AOP
<a class=header-anchor href=#2-%e4%bd%bf%e7%94%a8spring%e5%ae%9e%e7%8e%b0aop></a></h3><blockquote><p>导入依赖</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;groupId&gt;</span>org.aspectj<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;artifactId&gt;</span>aspectjweaver<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;version&gt;</span>1.9.4<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span></code></pre></div><h4 id=方式一使用spring的api接口>方式一：使用Spring的API接口
<a class=header-anchor href=#%e6%96%b9%e5%bc%8f%e4%b8%80%e4%bd%bf%e7%94%a8spring%e7%9a%84api%e6%8e%a5%e5%8f%a3></a></h4><ol><li><p>接口</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> lv.service;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>UserService</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>add</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>delete</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>query</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>实现接口</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> lv.service.impl;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> lv.service.UserService;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserServiceimpl</span> <span style=color:#66d9ef>implements</span> UserService {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>add</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;增加了有一个用户&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>delete</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;删除了有一个用户&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>update</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;修改了有一个用户&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>query</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;查询  了有一个用户&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>执行开始的日志类</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> lv.log;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.aop.MethodBeforeAdvice;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.lang.reflect.Method;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Log</span> <span style=color:#66d9ef>implements</span> MethodBeforeAdvice {
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param method  执行的目标对象的方法
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param objects 参数
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param o       目标对象
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @throws Throwable
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>before</span>(Method method, Object<span style=color:#f92672>[]</span> objects, Object o) <span style=color:#66d9ef>throws</span> Throwable {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(o.<span style=color:#a6e22e>getClass</span>().<span style=color:#a6e22e>getName</span>() <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;的&#34;</span> <span style=color:#f92672>+</span> method.<span style=color:#a6e22e>getName</span>() <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;方法被执行了&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>执行结束的日志</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> lv.log;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.aop.AfterReturningAdvice;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.lang.reflect.Method;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AfterLog</span> <span style=color:#66d9ef>implements</span> AfterReturningAdvice {
</span></span><span style=display:flex><span>    <span style=color:#75715e>//o ： 返回值</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>afterReturning</span>(Object o, Method method, Object<span style=color:#f92672>[]</span> objects, Object o1) <span style=color:#66d9ef>throws</span> Throwable {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(o1.<span style=color:#a6e22e>getClass</span>().<span style=color:#a6e22e>getName</span>() <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;的&#34;</span> <span style=color:#f92672>+</span> method.<span style=color:#a6e22e>getName</span>() <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;返回: &#34;</span> <span style=color:#f92672>+</span> o);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>bean.xml</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:aop=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/aop&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        http://www.springframework.org/schema/beans/spring-beans.xsd
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        http://www.springframework.org/schema/aop
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        http://www.springframework.org/schema/aop/spring-aop.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;userService&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;lv.service.impl.UserServiceimpl&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;log&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;lv.log.Log&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;afterLog&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;lv.log.AfterLog&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--需要导入aop的约束
</span></span></span><span style=display:flex><span><span style=color:#75715e>    xmlns:aop=&#34;http://www.springframework.org/schema/aop&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>    --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--方式一:原生API--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;aop:config&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!--切入点expression表达式 expression(要执行的位置 修饰词(public/private等) 返回值 类名 方法名 参数)--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;aop:pointcut</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;poincut&#34;</span> <span style=color:#a6e22e>expression=</span><span style=color:#e6db74>&#34;execution(* lv.service.impl.UserServiceimpl.*(..))&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!--执行环绕增加! 将log类和afterLog类切入到上面配置的方法上 --&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;aop:advisor</span> <span style=color:#a6e22e>advice-ref=</span><span style=color:#e6db74>&#34;log&#34;</span> <span style=color:#a6e22e>pointcut-ref=</span><span style=color:#e6db74>&#34;poincut&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;aop:advisor</span> <span style=color:#a6e22e>advice-ref=</span><span style=color:#e6db74>&#34;afterLog&#34;</span> <span style=color:#a6e22e>pointcut-ref=</span><span style=color:#e6db74>&#34;poincut&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/aop:config&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></div></li><li><p>测试类</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> lv.service.UserService;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.context.ApplicationContext;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.context.support.ClassPathXmlApplicationContext;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Test</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) {
</span></span><span style=display:flex><span>        ApplicationContext app <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ClassPathXmlApplicationContext(<span style=color:#e6db74>&#34;applicationContext.xml&#34;</span>);
</span></span><span style=display:flex><span>        UserService userservice <span style=color:#f92672>=</span> app.<span style=color:#a6e22e>getBean</span>(<span style=color:#e6db74>&#34;userService&#34;</span>, UserService.<span style=color:#a6e22e>class</span>);
</span></span><span style=display:flex><span>        userservice.<span style=color:#a6e22e>add</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>结果:</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-console data-lang=console><span style=display:flex><span>lv.service.impl.UserServiceimpl的add方法被执行了
</span></span><span style=display:flex><span>增加了有一个用户
</span></span><span style=display:flex><span>lv.service.impl.UserServiceimpl的add返回: null
</span></span></code></pre></div></li></ol><h4 id=方式二-自定义实现aop>方式二: 自定义实现AOP
<a class=header-anchor href=#%e6%96%b9%e5%bc%8f%e4%ba%8c-%e8%87%aa%e5%ae%9a%e4%b9%89%e5%ae%9e%e7%8e%b0aop></a></h4><ol><li><p>接口</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> lv.service;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>UserService</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>add</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>delete</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>update</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>query</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>接口实现</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> lv.service.impl;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> lv.service.UserService;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserServiceimpl</span> <span style=color:#66d9ef>implements</span> UserService {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>add</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;增加了有一个用户&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>delete</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;删除了有一个用户&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>update</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;修改了有一个用户&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>query</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;查询  了有一个用户&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>自定义point类</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> lv.diy;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>DiyPoinCut</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>before</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;方法执行前&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>after</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;方法执行后&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>bean.xml</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:aop=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/aop&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        http://www.springframework.org/schema/beans/spring-beans.xsd
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        http://www.springframework.org/schema/aop
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        http://www.springframework.org/schema/aop/spring-aop.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;userService&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;lv.service.impl.UserServiceimpl&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;log&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;lv.log.Log&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;afterLog&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;lv.log.AfterLog&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--需要导入aop的约束
</span></span></span><span style=display:flex><span><span style=color:#75715e>    xmlns:aop=&#34;http://www.springframework.org/schema/aop&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>    --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--方式一:原生API--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--    &lt;aop:config&gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--        &amp;lt;!&amp;ndash;切入点expression表达式 expression(要执行的位置 修饰词(public/private等) 返回值 类名 方法名 参数)&amp;ndash;&amp;gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--        &lt;aop:pointcut id=&#34;poincut&#34; expression=&#34;execution(* lv.service.impl.UserServiceimpl.*(..))&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--        &amp;lt;!&amp;ndash;执行环绕增加! 将log类和afterLog类切入到上面配置的方法上 &amp;ndash;&amp;gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--        &lt;aop:advisor advice-ref=&#34;log&#34; pointcut-ref=&#34;poincut&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--        &lt;aop:advisor advice-ref=&#34;afterLog&#34; pointcut-ref=&#34;poincut&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--    &lt;/aop:config&gt;--&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--方式二:自定义类--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;diy&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;lv.diy.DiyPoinCut&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;aop:config&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!--挂载自定义类的beanid--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;aop:aspect</span> <span style=color:#a6e22e>ref=</span><span style=color:#e6db74>&#34;diy&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!--切入点--&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;aop:pointcut</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;point&#34;</span> <span style=color:#a6e22e>expression=</span><span style=color:#e6db74>&#34;execution(* lv.service.impl.UserServiceimpl.*(..))&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!--通知--&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;aop:before</span> <span style=color:#a6e22e>method=</span><span style=color:#e6db74>&#34;before&#34;</span> <span style=color:#a6e22e>pointcut-ref=</span><span style=color:#e6db74>&#34;point&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;aop:after</span> <span style=color:#a6e22e>method=</span><span style=color:#e6db74>&#34;after&#34;</span> <span style=color:#a6e22e>pointcut-ref=</span><span style=color:#e6db74>&#34;point&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/aop:aspect&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/aop:config&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></div></li><li><p>测试类</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) {
</span></span><span style=display:flex><span>        ApplicationContext app <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ClassPathXmlApplicationContext(<span style=color:#e6db74>&#34;applicationContext.xml&#34;</span>);
</span></span><span style=display:flex><span>        UserService userservice <span style=color:#f92672>=</span> app.<span style=color:#a6e22e>getBean</span>(<span style=color:#e6db74>&#34;userService&#34;</span>, UserService.<span style=color:#a6e22e>class</span>);
</span></span><span style=display:flex><span>        userservice.<span style=color:#a6e22e>add</span>();
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div></li><li><p>结果</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-console data-lang=console><span style=display:flex><span>方法执行前
</span></span><span style=display:flex><span>增加了有一个用户
</span></span><span style=display:flex><span>方法执行后
</span></span></code></pre></div></li></ol><h4 id=方式三注解实现>方式三：注解实现
<a class=header-anchor href=#%e6%96%b9%e5%bc%8f%e4%b8%89%e6%b3%a8%e8%a7%a3%e5%ae%9e%e7%8e%b0></a></h4><ol><li><p>切面类</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> lv.diy;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.aspectj.lang.annotation.After;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.aspectj.lang.annotation.Aspect;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.aspectj.lang.annotation.Before;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @Aspect: 标注这个类是切面类
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Aspect</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AnonCut</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Before</span>(value <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;execution(* lv.service.impl.UserServiceimpl.*(..))&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>before</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;方法执行前&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@After</span>(value <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;execution(* lv.service.impl.UserServiceimpl.*(..))&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>after</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;方法执行后&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></li><li><p>bean.xml</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:aop=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/aop&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        http://www.springframework.org/schema/beans/spring-beans.xsd
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        http://www.springframework.org/schema/aop
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        http://www.springframework.org/schema/aop/spring-aop.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;userService&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;lv.service.impl.UserServiceimpl&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;log&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;lv.log.Log&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;afterLog&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;lv.log.AfterLog&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--需要导入aop的约束
</span></span></span><span style=display:flex><span><span style=color:#75715e>    xmlns:aop=&#34;http://www.springframework.org/schema/aop&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>    --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--方式一:原生API--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--    &lt;aop:config&gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--        &amp;lt;!&amp;ndash;切入点expression表达式 expression(要执行的位置 修饰词(public/private等) 返回值 类名 方法名 参数)&amp;ndash;&amp;gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--        &lt;aop:pointcut id=&#34;poincut&#34; expression=&#34;execution(* lv.service.impl.UserServiceimpl.*(..))&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--        &amp;lt;!&amp;ndash;执行环绕增加! 将log类和afterLog类切入到上面配置的方法上 &amp;ndash;&amp;gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--        &lt;aop:advisor advice-ref=&#34;log&#34; pointcut-ref=&#34;poincut&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--        &lt;aop:advisor advice-ref=&#34;afterLog&#34; pointcut-ref=&#34;poincut&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--    &lt;/aop:config&gt;--&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--方式二:自定义类--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--    &lt;bean id=&#34;diy&#34; class=&#34;lv.diy.DiyPoinCut&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--    &lt;aop:config&gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--        &amp;lt;!&amp;ndash;挂载自定义类的beanid&amp;ndash;&amp;gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--        &lt;aop:aspect ref=&#34;diy&#34;&gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--            &amp;lt;!&amp;ndash;切入点&amp;ndash;&amp;gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--            &lt;aop:pointcut id=&#34;point&#34; expression=&#34;execution(* lv.service.impl.UserServiceimpl.*(..))&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--            &amp;lt;!&amp;ndash;通知&amp;ndash;&amp;gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--            &lt;aop:before method=&#34;before&#34; pointcut-ref=&#34;point&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--            &lt;aop:after method=&#34;after&#34; pointcut-ref=&#34;point&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--        &lt;/aop:aspect&gt;--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--    &lt;/aop:config&gt;--&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--方式三： 注解--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;annoncut&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;lv.diy.AnonCut&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--开启注解支持--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;aop:aspectj-autoproxy/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></div></li></ol><h2 id=8spring整合mybatis>8.Spring整合Mybatis
<a class=header-anchor href=#8spring%e6%95%b4%e5%90%88mybatis></a></h2><h3 id=mybatis基础>mybatis基础
<a class=header-anchor href=#mybatis%e5%9f%ba%e7%a1%80></a></h3><h4 id=1-导入依赖包>1. 导入依赖包
<a class=header-anchor href=#1-%e5%af%bc%e5%85%a5%e4%be%9d%e8%b5%96%e5%8c%85></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;project</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://maven.apache.org/POM/4.0.0&#34;</span>
</span></span><span style=display:flex><span>         <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>         <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;parent&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;artifactId&gt;</span>spring<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;groupId&gt;</span>com.lv<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;version&gt;</span>1.0-SNAPSHOT<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/parent&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;modelVersion&gt;</span>4.0.0<span style=color:#f92672>&lt;/modelVersion&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>spring-06-mybatis<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;properties&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;maven.compiler.source&gt;</span>8<span style=color:#f92672>&lt;/maven.compiler.source&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;maven.compiler.target&gt;</span>8<span style=color:#f92672>&lt;/maven.compiler.target&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/properties&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dependencies&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!--spring相关包--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;groupId&gt;</span>org.springframework<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;artifactId&gt;</span>spring-webmvc<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;version&gt;</span>5.3.9<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!--mybatis--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;groupId&gt;</span>org.mybatis<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;artifactId&gt;</span>mybatis<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;version&gt;</span>3.5.1<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!--mysql数据库核心包--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;groupId&gt;</span>mysql<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;artifactId&gt;</span>mysql-connector-java<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;version&gt;</span>8.0.16<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!--jdbc连接--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;groupId&gt;</span>org.springframework<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;artifactId&gt;</span>spring-jdbc<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;version&gt;</span>5.1.7.RELEASE<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!--aop--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;groupId&gt;</span>org.aspectj<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;artifactId&gt;</span>aspectjweaver<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;version&gt;</span>1.9.4<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!--spring整合mybatis--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;groupId&gt;</span>org.mybatis<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;artifactId&gt;</span>mybatis-spring<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;version&gt;</span>2.0.1<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!--mariadbjdbc--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;groupId&gt;</span>org.mariadb.jdbc<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;artifactId&gt;</span>mariadb-java-client<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;version&gt;</span>2.1.2<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dependencies&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--配置加载xml--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;build&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;resources&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;resource&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;directory&gt;</span>src/main/java<span style=color:#f92672>&lt;/directory&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;includes&gt;</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&lt;include&gt;</span>**/*.xml<span style=color:#f92672>&lt;/include&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;/includes&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;filtering&gt;</span>true<span style=color:#f92672>&lt;/filtering&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;/resource&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/resources&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/build&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/project&gt;</span>
</span></span></code></pre></div><h4 id=2-mybatis配置文件>2. mybatis配置文件
<a class=header-anchor href=#2-mybatis%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!DOCTYPE configuration
</span></span></span><span style=display:flex><span><span style=color:#75715e>        PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>        &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--别名--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;typeAliases&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;package</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;lv.pojo.User&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/typeAliases&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--环境配置--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;environments</span> <span style=color:#a6e22e>default=</span><span style=color:#e6db74>&#34;development&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;environment</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;development&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;transactionManager</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;JDBC&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;dataSource</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;POOLED&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;driver&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;org.mariadb.jdbc.Driver&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;url&#34;</span>
</span></span><span style=display:flex><span>                          <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;jdbc:mariadb://localhost:3306/lvxiaobin?useSSl=true&amp;amp;useUnicode=true&amp;amp;characterEncoding=UTF-8&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;username&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;lv&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;password&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;xiao&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;/dataSource&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/environment&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/environments&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--配置xml--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;mappers&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;mapper</span> <span style=color:#a6e22e>resource=</span><span style=color:#e6db74>&#34;lv/mapper/xml/UserMapper.xml&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/mappers&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/configuration&gt;</span>
</span></span></code></pre></div><h4 id=3-maper>3. maper
<a class=header-anchor href=#3-maper></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!DOCTYPE mapper
</span></span></span><span style=display:flex><span><span style=color:#75715e>        PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>        &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;mapper</span> <span style=color:#a6e22e>namespace=</span><span style=color:#e6db74>&#34;lv.mapper.UserMapper&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;select</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;selectUser&#34;</span> <span style=color:#a6e22e>resultType=</span><span style=color:#e6db74>&#34;lv.pojo.User&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        select * from user;
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/select&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/mapper&gt;</span>
</span></span></code></pre></div><h4 id=4-接口>4. 接口
<a class=header-anchor href=#4-%e6%8e%a5%e5%8f%a3></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> lv.mapper;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> lv.pojo.User;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.List;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>UserMapper</span> {
</span></span><span style=display:flex><span>    List<span style=color:#f92672>&lt;</span>User<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>selectUser</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=5-实体类>5. 实体类
<a class=header-anchor href=#5-%e5%ae%9e%e4%bd%93%e7%b1%bb></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> lv.pojo;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> id;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String name;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> age;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getId</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> id;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setId</span>(<span style=color:#66d9ef>int</span> id) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>id</span> <span style=color:#f92672>=</span> id;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getName</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> name;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setName</span>(String name) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> name;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getAge</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> age;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setAge</span>(<span style=color:#66d9ef>int</span> age) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>age</span> <span style=color:#f92672>=</span> age;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>toString</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;User{&#34;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;id=&#34;</span> <span style=color:#f92672>+</span> id <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;, name=&#39;&#34;</span> <span style=color:#f92672>+</span> name <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\&#39;&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;, age=&#34;</span> <span style=color:#f92672>+</span> age <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;}&#39;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=6-测试>6. 测试
<a class=header-anchor href=#6-%e6%b5%8b%e8%af%95></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> lv.mapper.UserMapper;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> lv.pojo.User;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.apache.ibatis.io.Resources;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.apache.ibatis.session.SqlSession;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.apache.ibatis.session.SqlSessionFactory;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.mybatis.spring.SqlSessionFactoryBean;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.io.IOException;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.io.InputStream;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.List;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Test</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@org.junit.Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>userTest</span>() <span style=color:#66d9ef>throws</span> IOException {
</span></span><span style=display:flex><span>        String resouce <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;mybatis-config.xml&#34;</span>;
</span></span><span style=display:flex><span>        InputStream resourceAsStream <span style=color:#f92672>=</span> Resources.<span style=color:#a6e22e>getResourceAsStream</span>(resouce);
</span></span><span style=display:flex><span>        SqlSessionFactory build <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> SqlSessionFactoryBuilder().<span style=color:#a6e22e>build</span>(resourceAsStream);
</span></span><span style=display:flex><span>        SqlSession sqlSession <span style=color:#f92672>=</span> build.<span style=color:#a6e22e>openSession</span>(<span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        UserMapper mapper <span style=color:#f92672>=</span> sqlSession.<span style=color:#a6e22e>getMapper</span>(UserMapper.<span style=color:#a6e22e>class</span>);
</span></span><span style=display:flex><span>        List<span style=color:#f92672>&lt;</span>User<span style=color:#f92672>&gt;</span> users <span style=color:#f92672>=</span> mapper.<span style=color:#a6e22e>selectUser</span>();
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(users);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=整合方式一>整合方式一
<a class=header-anchor href=#%e6%95%b4%e5%90%88%e6%96%b9%e5%bc%8f%e4%b8%80></a></h3><h4 id=1编写数据源>1.编写数据源
<a class=header-anchor href=#1%e7%bc%96%e5%86%99%e6%95%b0%e6%8d%ae%e6%ba%90></a></h4><h4 id=2-sqlsessionfactory>2. sqlSessionFactory
<a class=header-anchor href=#2-sqlsessionfactory></a></h4><h4 id=3sqlsessiontemplate>3.sqlSessionTemplate
<a class=header-anchor href=#3sqlsessiontemplate></a></h4><blockquote><p>把原来写的mybatis-config.xml中配置转移到spring-dao.xml中</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!DOCTYPE configuration
</span></span></span><span style=display:flex><span><span style=color:#75715e>        PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>        &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--别名--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;typeAliases&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;package</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;lv.pojo.User&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/typeAliases&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--环境配置--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--    &lt;environments default=&#34;development&#34;&gt;--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--        &lt;environment id=&#34;development&#34;&gt;--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--            &lt;transactionManager type=&#34;JDBC&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--            &lt;dataSource type=&#34;POOLED&#34;&gt;--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--                &lt;property name=&#34;driver&#34; value=&#34;org.mariadb.jdbc.Driver&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--                &lt;property name=&#34;url&#34;--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--                          value=&#34;jdbc:mariadb://localhost:3306/lvxiaobin?useSSl=true&amp;amp;useUnicode=true&amp;amp;characterEncoding=UTF-8&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--                &lt;property name=&#34;username&#34; value=&#34;lv&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--                &lt;property name=&#34;password&#34; value=&#34;xiao&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--            &lt;/dataSource&gt;--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--        &lt;/environment&gt;--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--    &lt;/environments&gt;--&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--配置xml--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--    &lt;mappers&gt;--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--        &lt;mapper resource=&#34;lv/mapper/xml/UserMapper.xml&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--    &lt;/mappers&gt;--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/configuration&gt;</span>
</span></span></code></pre></div><blockquote><p>创建spring-dao.xml用来专门配置mybatis</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--
</span></span></span><span style=display:flex><span><span style=color:#75715e>    dateSource:使用spring的数据源替换mybatis配置 c3p0 dbcp druid
</span></span></span><span style=display:flex><span><span style=color:#75715e>    使用spring提供的jdbc,需要在pom中导spring-jdbc依赖
</span></span></span><span style=display:flex><span><span style=color:#75715e>    --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;dateSource&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;org.springframework.jdbc.datasource.DriverManagerDataSource&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;url&#34;</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;jdbc:mariadb://localhost:3306/lvxiaobin?useSSl=true&amp;amp;useUnicode=true&amp;amp;characterEncoding=UTF-8&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;username&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;lv&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;password&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;xiao&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;schema&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;lvxiaobin&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/bean&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--sqlSessionFactory--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;sqlSessionFactory&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;org.mybatis.spring.SqlSessionFactoryBean&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;dataSource&#34;</span> <span style=color:#a6e22e>ref=</span><span style=color:#e6db74>&#34;dateSource&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!--绑定mybatis配置文件--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!--可以使用此方法配置别名,完全舍弃mybatis-config.xml中的配置--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;typeAliases&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;lv.pojo.User&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!--        &lt;property name=&#34;configLocation&#34; value=&#34;classpath:mybatis-config.xml&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;mapperLocations&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;classpath:lv/mapper/xml/*.xml&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/bean&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--SqlSessionTemplate就是sqlSession--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;sqlSession&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;org.mybatis.spring.SqlSessionTemplate&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!--只能用构造器注入sqlSessionFactory,因为只有构造器注入,没有set方法--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;constructor-arg</span> <span style=color:#a6e22e>index=</span><span style=color:#e6db74>&#34;0&#34;</span> <span style=color:#a6e22e>ref=</span><span style=color:#e6db74>&#34;sqlSessionFactory&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/bean&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></div><h4 id=4给接口添加实现类>4.给接口添加实现类
<a class=header-anchor href=#4%e7%bb%99%e6%8e%a5%e5%8f%a3%e6%b7%bb%e5%8a%a0%e5%ae%9e%e7%8e%b0%e7%b1%bb></a></h4><blockquote><p>编写UserMapper的实现类</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> lv.mapper;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> lv.pojo.User;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.mybatis.spring.SqlSessionTemplate;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.List;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserMapperImpl</span> <span style=color:#66d9ef>implements</span> UserMapper {
</span></span><span style=display:flex><span>    <span style=color:#75715e>//原来所有的操作都使用sqlSession操作,但是现在都用sqlSessionTemplate</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> SqlSessionTemplate sqlSessionTemplate;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//使用set方法在applicationContext.xml中注入</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setSqlSessionTemplate</span>(SqlSessionTemplate sqlSessionTemplate) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>sqlSessionTemplate</span> <span style=color:#f92672>=</span> sqlSessionTemplate;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> List<span style=color:#f92672>&lt;</span>User<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>selectUser</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> sqlSessionTemplate.<span style=color:#a6e22e>getMapper</span>(UserMapper.<span style=color:#a6e22e>class</span>).<span style=color:#a6e22e>selectUser</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=5将实现类注入到spring>5.将实现类注入到spring
<a class=header-anchor href=#5%e5%b0%86%e5%ae%9e%e7%8e%b0%e7%b1%bb%e6%b3%a8%e5%85%a5%e5%88%b0spring></a></h4><blockquote><p>创建applicationContext.xml用来统一管理其他的子xml</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;beans</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--
</span></span></span><span style=display:flex><span><span style=color:#75715e>    使用一个applicationContext统一管理多个xml
</span></span></span><span style=display:flex><span><span style=color:#75715e>    --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--引入数据库配置spring-dao.xml--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;import</span> <span style=color:#a6e22e>resource=</span><span style=color:#e6db74>&#34;spring-dao.xml&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--注入UserMapperImpl--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;userMapper&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;lv.mapper.UserMapperImpl&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;sqlSessionTemplate&#34;</span> <span style=color:#a6e22e>ref=</span><span style=color:#e6db74>&#34;sqlSession&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/bean&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/beans&gt;</span>
</span></span></code></pre></div><h4 id=6测试>6.测试
<a class=header-anchor href=#6%e6%b5%8b%e8%af%95></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span>    <span style=color:#a6e22e>@org.junit.Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>userImplTest</span>(){
</span></span><span style=display:flex><span>        ApplicationContext applicationContext <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ClassPathXmlApplicationContext(<span style=color:#e6db74>&#34;applicationContext.xml&#34;</span>);
</span></span><span style=display:flex><span>        UserMapper userMapper <span style=color:#f92672>=</span> applicationContext.<span style=color:#a6e22e>getBean</span>(<span style=color:#e6db74>&#34;userMapper&#34;</span>, UserMapper.<span style=color:#a6e22e>class</span>);
</span></span><span style=display:flex><span>        List<span style=color:#f92672>&lt;</span>User<span style=color:#f92672>&gt;</span> users <span style=color:#f92672>=</span> userMapper.<span style=color:#a6e22e>selectUser</span>();
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(users);
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><h3 id=方式二>方式二
<a class=header-anchor href=#%e6%96%b9%e5%bc%8f%e4%ba%8c></a></h3><blockquote><p>相比与方式一,只是继承了<code>SqlSessionDaoSupport</code>,省略了set方法,其他的一样</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> lv.mapper;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> lv.pojo.User;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.mybatis.spring.support.SqlSessionDaoSupport;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.List;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserMapperImpl2</span> <span style=color:#66d9ef>extends</span> SqlSessionDaoSupport <span style=color:#66d9ef>implements</span> UserMapper {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> List<span style=color:#f92672>&lt;</span>User<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>selectUser</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> getSqlSession().<span style=color:#a6e22e>getMapper</span>(UserMapper.<span style=color:#a6e22e>class</span>).<span style=color:#a6e22e>selectUser</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=spring控制事务>spring控制事务
<a class=header-anchor href=#spring%e6%8e%a7%e5%88%b6%e4%ba%8b%e5%8a%a1></a></h3><blockquote><p>配合aop配置,只有xml需要更改</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>&lt;?</span>xml version<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1.0&#34;</span> encoding<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;UTF-8&#34;</span><span style=color:#f92672>?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;</span>beans xmlns<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style=display:flex><span>       xmlns:xsi<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>       xmlns:aop<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/aop&#34;</span>
</span></span><span style=display:flex><span>       xmlns:tx<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/tx&#34;</span>
</span></span><span style=display:flex><span>       xsi:schemaLocation<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;http://www.springframework.org/schema/beans
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        http://www.springframework.org/schema/beans/spring-beans.xsd
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        http://www.springframework.org/schema/aop
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        http://www.springframework.org/schema/aop/spring-aop.xsd
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        http://www.springframework.org/schema/tx
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        http://www.springframework.org/schema/tx/spring-tx.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;!--</span>
</span></span><span style=display:flex><span>    dateSource:使用spring的数据源替换mybatis配置 c3p0 dbcp druid
</span></span><span style=display:flex><span>    使用spring提供的jdbc,需要在pom中导spring<span style=color:#f92672>-</span>jdbc依赖
</span></span><span style=display:flex><span>    <span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span>bean id<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;dateSource&#34;</span> <span style=color:#66d9ef>class</span><span style=color:#960050;background-color:#1e0010>=&#34;</span><span style=color:#a6e22e>org</span>.<span style=color:#a6e22e>springframework</span>.<span style=color:#a6e22e>jdbc</span>.<span style=color:#a6e22e>datasource</span>.<span style=color:#a6e22e>DriverManagerDataSource</span><span style=color:#e6db74>&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;property name=&#34;</span>url<span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                  value=&#34;</span>jdbc:mariadb:<span style=color:#75715e>//localhost:3306/lvxiaobin?useSSl=true&amp;amp;useUnicode=true&amp;amp;characterEncoding=UTF-8&#34;/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span>property name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span> value<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;lv&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span>property name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;password&#34;</span> value<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;xiao&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;</span>property name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;schema&#34;</span> value<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;lvxiaobin&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/</span>bean<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;!--</span>sqlSessionFactory<span style=color:#f92672>--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span>bean id<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sqlSessionFactory&#34;</span> <span style=color:#66d9ef>class</span><span style=color:#960050;background-color:#1e0010>=&#34;</span><span style=color:#a6e22e>org</span>.<span style=color:#a6e22e>mybatis</span>.<span style=color:#a6e22e>spring</span>.<span style=color:#a6e22e>SqlSessionFactoryBean</span><span style=color:#e6db74>&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;property name=&#34;</span>dataSource<span style=color:#e6db74>&#34; ref=&#34;</span>dateSource<span style=color:#e6db74>&#34;/&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;!--绑定mybatis配置文件--&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;!--可以使用此方法配置别名,完全舍弃mybatis-config.xml中的配置--&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;property name=&#34;</span>typeAliases<span style=color:#e6db74>&#34; value=&#34;</span>lv.<span style=color:#a6e22e>pojo</span>.<span style=color:#a6e22e>IUser</span><span style=color:#e6db74>&#34;/&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;property name=&#34;</span>mapperLocations<span style=color:#e6db74>&#34; value=&#34;</span>classpath:lv<span style=color:#f92672>/</span>mapper<span style=color:#f92672>/</span>xml<span style=color:#f92672>/*</span>.<span style=color:#a6e22e>xml</span><span style=color:#e6db74>&#34;/&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;/bean&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;!--SqlSessionTemplate就是sqlSession--&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;bean id=&#34;</span>sqlSession<span style=color:#e6db74>&#34; class=&#34;</span>org.<span style=color:#a6e22e>mybatis</span>.<span style=color:#a6e22e>spring</span>.<span style=color:#a6e22e>SqlSessionTemplate</span><span style=color:#e6db74>&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;!--只能用构造器注入sqlSessionFactory,因为只有构造器注入,没有set方法--&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;constructor-arg index=&#34;</span>0<span style=color:#e6db74>&#34; ref=&#34;</span>sqlSessionFactory<span style=color:#e6db74>&#34;/&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;/bean&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;!--开启事务--&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;bean id=&#34;</span>transation<span style=color:#e6db74>&#34; class=&#34;</span>org.<span style=color:#a6e22e>springframework</span>.<span style=color:#a6e22e>jdbc</span>.<span style=color:#a6e22e>datasource</span>.<span style=color:#a6e22e>DataSourceTransactionManager</span><span style=color:#e6db74>&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;constructor-arg ref=&#34;</span>dateSource<span style=color:#e6db74>&#34;/&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;/bean&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;!--结合AOP插入事务--&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;!--配置事务通知:--&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;tx:advice id=&#34;</span>txAdvice<span style=color:#e6db74>&#34; transaction-manager=&#34;</span>transation<span style=color:#e6db74>&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;!--给方法配置事务--&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;tx:attributes&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;tx:method name=&#34;</span>add<span style=color:#e6db74>&#34;/&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;tx:method name=&#34;</span>delete<span style=color:#e6db74>&#34;/&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;tx:method name=&#34;</span>update<span style=color:#e6db74>&#34;/&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &lt;tx:method name=&#34;</span><span style=color:#f92672>*</span><span style=color:#e6db74>&#34;/&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;/tx:attributes&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;/tx:advice&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;aop:config&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;aop:pointcut id=&#34;</span>txPoint<span style=color:#e6db74>&#34; expression=&#34;</span>execution(<span style=color:#f92672>*</span> lv.<span style=color:#a6e22e>mapper</span>.<span style=color:#f92672>*</span>.<span style=color:#f92672>*</span>(..))<span style=color:#e6db74>&#34;/&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &lt;aop:advisor advice-ref=&#34;</span>txAdvice<span style=color:#e6db74>&#34; pointcut-ref=&#34;</span>txPoint<span style=color:#e6db74>&#34;/&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &lt;/aop:config&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&lt;/beans&gt;
</span></span></span></code></pre></div></div><footer class=post-footer><div class=post-tags><a href=/tags/java>java</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=post-copyright><img src=/imgs/cc/cc.svg width=75 height=75 align=right alt=共享知识><ul><li class=post-copyright-title><strong>文章标题：</strong>
spring要点</li><li class=post-copyright-author><strong>本文作者： </strong>brandyKK</li><li class=post-copyright-link><strong>本文链接：</strong>
<a id=post-cr-link href=https://brandykk.github.io/post/%E7%BC%96%E7%A8%8B/java/spring/spring%E8%A6%81%E7%82%B9/ title=spring要点>https://brandykk.github.io/post/%E7%BC%96%E7%A8%8B/java/spring/spring%E8%A6%81%E7%82%B9/</a></li><li class=post-copyright-license><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/%E7%BC%96%E7%A8%8B/java/spring/spring%E7%AE%80%E4%BB%8B/ rel=next title=spring简介><i class="fa fa-chevron-left"></i> spring简介</a></div><div class="post-nav-prev post-nav-item"><a href=/post/%E7%BC%96%E7%A8%8B/db/nodejs%E8%BF%9E%E6%8E%A5sqlite%E6%95%B0%E6%8D%AE%E5%BA%93/ rel=prev title=sqlite>sqlite
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div></main><footer class=footer><div class=footer-inner><div id=gtranslate class=google-translate><i class="fa fa-language"></i><div id=google_translate_element></div></div><div class=copyright>&copy;
<span itemprop=copyrightYear>2024
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>brandyKK</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.123.7 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.5.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div></div></footer><script type=text/javascript src=https://cdn.staticfile.org/animejs/3.2.1/anime.min.js defer></script><script type=text/javascript src=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.js defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"copybtn":true,"darkmode":true,"giscus":{"cfg":{"category":"Comments","categoryid":null,"emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"username/repo-name","repoid":null,"theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"https://brandykk.github.io/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lazyload":true,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":false,"plugin":"waline"},"views":{"enable":false,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","sidebar":{"display":"hide","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"qiniu","router":"https://cdn.staticfile.org"},"version":"4.5.3","waline":{"cfg":{"emoji":false,"imguploader":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"serverurl":null,"sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"waline","file":"dist/waline.css","name":"@waline/client","version":"2.13.0"},"js":{"alias":"waline","file":"dist/waline.js","name":"@waline/client","version":"2.13.0"}}}</script><script type=text/javascript src=/js/main.min.11d6c39ce43fcb97ea816ea2c136c17f188cacbba49ae066e747ea0f71b633a0.js defer></script><script type=text/javascript src=/js/math.min.a6ada19a368d85dad9ead2040d86ae561a867fafef89391d1aa2aa5909366509.js defer></script><script type=text/javascript src=/js/mermaid.min.77ebf4c34a07c63b16a3dfd983ab79bca13df5bd4f4b9df22ddda6d365e117f6.js defer></script></body></html>